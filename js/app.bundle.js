webpackJsonp([1],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){for(var e=0,t=O.length;e<t;e++){var n=O[e];if(n.hash==window.location.hash){var i=e>0?O[e-1].hash:"",r=e<t-1?O[e+1].hash:"";return void a(n["class"],n.hash,i,r)}}window.location.hash=O[O.length-1].hash,a(O[O.length-1]["class"],O[O.length-1].hash,O[O.length-2].hash,"")}function a(e,t,n,i){if(console.log(" --",t.replace("#","")),U=new e,""!=n){var r=document.createElement("a");r.setAttribute("href",'javascript:window.updateRoute("'+n+'");'),r.setAttribute("class","arrow-anchor left"),r.innerHTML="<span><</span>"+n.replace("#",""),document.body.appendChild(r)}if(""!=i){var a=document.createElement("a");a.setAttribute("href",'javascript:window.updateRoute("'+i+'");'),a.setAttribute("class","arrow-anchor right"),a.innerHTML=i.replace("#","")+">",document.body.appendChild(a)}}function o(e){window.location.hash=e,window.location.reload()}var s=n(1);i(s);n(19);var l=n(20),d=i(l),u=n(21),c=i(u),h=n(22),f=i(h),m=n(24),p=i(m),v=n(26),g=i(v),w=n(28),b=i(w),_=n(30),y=i(_),x=n(32),S=i(x),C=n(35),P=i(C),E=n(38),M=i(E),A=n(43),T=i(A),R=n(48),k=i(R),O=[{hash:"#Step01","class":d["default"]},{hash:"#Step02","class":c["default"]},{hash:"#Step03","class":f["default"]},{hash:"#Step04","class":p["default"]},{hash:"#Step05","class":g["default"]},{hash:"#Step06","class":b["default"]},{hash:"#Step07","class":y["default"]},{hash:"#Step08","class":S["default"]},{hash:"#Step09","class":P["default"]},{hash:"#Step10","class":M["default"]},{hash:"#Step11","class":T["default"]},{hash:"#Step12","class":k["default"]}],U=null;r(),window.updateRoute=o},,function(e,t,n){var i,r,a;!function(n,o){r=[],i=o,a="function"==typeof i?i.apply(t,r):i,!(void 0!==a&&(e.exports=a))}(this,function(){function e(e){var t=a(e.hue),n=l(t);return n<0&&(n=360+n),n}function t(e,t){if("random"===t.luminosity)return l([0,100]);if("monochrome"===t.hue)return 0;var n=o(e),i=n[0],r=n[1];switch(t.luminosity){case"bright":i=55;break;case"dark":i=r-10;break;case"light":r=55}return l([i,r])}function n(e,t,n){var i=r(e,t),a=100;switch(n.luminosity){case"dark":a=i+20;break;case"light":i=(a+i)/2;break;case"random":i=0,a=100}return l([i,a])}function i(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return f(e);case"hsl":var n=f(e);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"hsla":var i=f(e);return"hsla("+i[0]+", "+i[1]+"%, "+i[2]+"%, "+Math.random()+")";case"rgbArray":return h(e);case"rgb":var r=h(e);return"rgb("+r.join(", ")+")";case"rgba":var a=h(e);return"rgba("+a.join(", ")+", "+Math.random()+")";default:return d(e)}}function r(e,t){for(var n=s(e).lowerBounds,i=0;i<n.length-1;i++){var r=n[i][0],a=n[i][1],o=n[i+1][0],l=n[i+1][1];if(t>=r&&t<=o){var d=(l-a)/(o-r),u=a-d*r;return d*t+u}}return 0}function a(e){if("number"==typeof parseInt(e)){var t=parseInt(e);if(t<360&&t>0)return[t,t]}if("string"==typeof e&&v[e]){var n=v[e];if(n.hueRange)return n.hueRange}return[0,360]}function o(e){return s(e).saturationRange}function s(e){e>=334&&e<=360&&(e-=360);for(var t in v){var n=v[t];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return v[t]}return"Color not found"}function l(e){if(null===p)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var t=e[1]||1,n=e[0]||0;p=(9301*p+49297)%233280;var i=p/233280;return Math.floor(n+i*(t-n))}function d(e){function t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var n=h(e),i="#"+t(n[0])+t(n[1])+t(n[2]);return i}function u(e,t,n){var i=n[0][0],r=n[n.length-1][0],a=n[n.length-1][1],o=n[0][1];v[e]={hueRange:t,lowerBounds:n,saturationRange:[i,r],brightnessRange:[a,o]}}function c(){u("monochrome",null,[[0,0],[100,0]]),u("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),u("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),u("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),u("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),u("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),u("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),u("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function h(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var n=e[1]/100,i=e[2]/100,r=Math.floor(6*t),a=6*t-r,o=i*(1-n),s=i*(1-a*n),l=i*(1-(1-a)*n),d=256,u=256,c=256;switch(r){case 0:d=i,u=l,c=o;break;case 1:d=s,u=i,c=o;break;case 2:d=o,u=i,c=l;break;case 3:d=o,u=s,c=i;break;case 4:d=l,u=o,c=i;break;case 5:d=i,u=o,c=s}var h=[Math.floor(255*d),Math.floor(255*u),Math.floor(255*c)];return h}function f(e){var t=e[0],n=e[1]/100,i=e[2]/100,r=(2-n)*i;return[t,Math.round(n*i/(r<1?r:2-r)*1e4)/100,r/2*100]}function m(e){for(var t=0,n=0;n!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);n++)t+=e.charCodeAt(n);return t}var p=null,v={};c();var g=function(r){if(r=r||{},r.seed&&r.seed===parseInt(r.seed,10))p=r.seed;else if("string"==typeof r.seed)p=m(r.seed);else{if(void 0!==r.seed&&null!==r.seed)throw new TypeError("The seed value must be an integer or string");p=null}var a,o,s;if(null!==r.count&&void 0!==r.count){var l=r.count,d=[];for(r.count=null;l>d.length;)p&&r.seed&&(r.seed+=1),d.push(g(r));return r.count=l,d}return a=e(r),o=t(a,r),s=n(a,o,r),i([a,o,s],r)};return g})},function(e,t){var n=function(){function e(e){return r.appendChild(e.dom),e}function t(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(e){e.preventDefault(),t(++i%r.children.length)},!1);var a=(performance||Date).now(),o=a,s=0,l=e(new n.Panel("FPS","#0ff","#002")),d=e(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new n.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:r,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(d.update(e-a,200),e>o+1e3&&(l.update(1e3*s/(e-o),100),o=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:t}};n.Panel=function(e,t,n){var i=1/0,r=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,d=3*o,u=2*o,c=3*o,h=15*o,f=74*o,m=30*o,p=document.createElement("canvas");p.width=s,p.height=l,p.style.cssText="width:80px;height:48px";var v=p.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,l),v.fillStyle=t,v.fillText(e,d,u),v.fillRect(c,h,f,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(c,h,f,m),{dom:p,update:function(l,g){i=Math.min(i,l),r=Math.max(r,l),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,h),v.fillStyle=t,v.fillText(a(l)+" "+e+" ("+a(i)+"-"+a(r)+")",d,u),v.drawImage(p,c+o,h,f-o,m,c,h,f-o,m),v.fillRect(c+f-o,h,o,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(c+f-o,h,o,a((1-l/g)*m))}}},"object"==typeof e&&(e.exports=n)},function(e,t){e.exports=function(e){function t(t){this.object=t,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var n,i,r=this,a=1e-6,o=0,s=0,l=1,d=new e.Vector3,u=!1;this.getPolarAngle=function(){return i},this.getAzimuthalAngle=function(){return n},this.rotateLeft=function(e){s-=e},this.rotateUp=function(e){o-=e},this.panLeft=function(){var t=new e.Vector3;return function(e){var n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.multiplyScalar(-e),d.add(t)}}(),this.panUp=function(){var t=new e.Vector3;return function(e){var n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),d.add(t)}}(),this.pan=function(t,n,i,a){if(r.object instanceof e.PerspectiveCamera){var o=r.object.position,s=o.clone().sub(r.target),l=s.length();l*=Math.tan(r.object.fov/2*Math.PI/180),r.panLeft(2*t*l/a),r.panUp(2*n*l/a)}else r.object instanceof e.OrthographicCamera?(r.panLeft(t*(r.object.right-r.object.left)/i),r.panUp(n*(r.object.top-r.object.bottom)/a)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){r.object instanceof e.PerspectiveCamera?l/=t:r.object instanceof e.OrthographicCamera?(r.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),r.object.updateProjectionMatrix(),u=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){r.object instanceof e.PerspectiveCamera?l*=t:r.object instanceof e.OrthographicCamera?(r.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),r.object.updateProjectionMatrix(),u=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var r=new e.Vector3,c=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),h=c.clone().inverse(),f=new e.Vector3,m=new e.Quaternion;return function(){var e=this.object.position;r.copy(e).sub(this.target),r.applyQuaternion(c),n=Math.atan2(r.x,r.z),i=Math.atan2(Math.sqrt(r.x*r.x+r.z*r.z),r.y),n+=s,i+=o,n=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,n)),i=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,i)),i=Math.max(a,Math.min(Math.PI-a,i));var t=r.length()*l;return t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(d),r.x=t*Math.sin(i)*Math.sin(n),r.y=t*Math.cos(i),r.z=t*Math.sin(i)*Math.cos(n),r.applyQuaternion(h),e.copy(this.target).add(r),this.object.lookAt(this.target),this.enableDamping===!0?(s*=1-this.dampingFactor,o*=1-this.dampingFactor):(s=0,o=0),l=1,d.set(0,0,0),!!(u||f.distanceToSquared(this.object.position)>a||8*(1-m.dot(this.object.quaternion))>a)&&(f.copy(this.object.position),m.copy(this.object.quaternion),u=!1,!0)}}()}function n(n,i){function r(e,t){var n=g.domElement===document?g.domElement.body:g.domElement;v.pan(e,t,n.clientWidth,n.clientHeight)}function a(){return 2*Math.PI/60/60*g.autoRotateSpeed}function o(){return Math.pow(.95,g.zoomSpeed)}function s(e){if(g.enabled!==!1){if(e.preventDefault(),e.button===g.mouseButtons.ORBIT){if(g.enableRotate===!1)return;A=M.ROTATE,w.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.ZOOM){if(g.enableZoom===!1)return;A=M.DOLLY,C.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.PAN){if(g.enablePan===!1)return;A=M.PAN,y.set(e.clientX,e.clientY)}A!==M.NONE&&(document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",d,!1),g.dispatchEvent(R))}}function l(e){if(g.enabled!==!1){e.preventDefault();var t=g.domElement===document?g.domElement.body:g.domElement;if(A===M.ROTATE){if(g.enableRotate===!1)return;b.set(e.clientX,e.clientY),_.subVectors(b,w),v.rotateLeft(2*Math.PI*_.x/t.clientWidth*g.rotateSpeed),v.rotateUp(2*Math.PI*_.y/t.clientHeight*g.rotateSpeed),w.copy(b)}else if(A===M.DOLLY){if(g.enableZoom===!1)return;P.set(e.clientX,e.clientY),E.subVectors(P,C),E.y>0?v.dollyIn(o()):E.y<0&&v.dollyOut(o()),C.copy(P)}else if(A===M.PAN){if(g.enablePan===!1)return;x.set(e.clientX,e.clientY),S.subVectors(x,y),r(S.x,S.y),y.copy(x)}A!==M.NONE&&g.update()}}function d(){g.enabled!==!1&&(document.removeEventListener("mousemove",l,!1),document.removeEventListener("mouseup",d,!1),g.dispatchEvent(k),A=M.NONE)}function u(e){if(g.enabled!==!1&&g.enableZoom!==!1&&A===M.NONE){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?v.dollyOut(o()):t<0&&v.dollyIn(o()),g.update(),g.dispatchEvent(R),g.dispatchEvent(k)}}function c(e){if(g.enabled!==!1&&g.enableKeys!==!1&&g.enablePan!==!1)switch(e.keyCode){case g.keys.UP:r(0,g.keyPanSpeed),g.update();break;case g.keys.BOTTOM:r(0,-g.keyPanSpeed),g.update();break;case g.keys.LEFT:r(g.keyPanSpeed,0),g.update();break;case g.keys.RIGHT:r(-g.keyPanSpeed,0),g.update()}}function h(e){if(g.enabled!==!1){switch(e.touches.length){case 1:if(g.enableRotate===!1)return;A=M.TOUCH_ROTATE,w.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(g.enableZoom===!1)return;A=M.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);C.set(0,i);break;case 3:if(g.enablePan===!1)return;A=M.TOUCH_PAN,y.set(e.touches[0].pageX,e.touches[0].pageY);break;default:A=M.NONE}A!==M.NONE&&g.dispatchEvent(R)}}function f(e){if(g.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=g.domElement===document?g.domElement.body:g.domElement;switch(e.touches.length){case 1:if(g.enableRotate===!1)return;if(A!==M.TOUCH_ROTATE)return;b.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(b,w),v.rotateLeft(2*Math.PI*_.x/t.clientWidth*g.rotateSpeed),v.rotateUp(2*Math.PI*_.y/t.clientHeight*g.rotateSpeed),w.copy(b),g.update();break;case 2:if(g.enableZoom===!1)return;if(A!==M.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(n*n+i*i);P.set(0,a),E.subVectors(P,C),E.y>0?v.dollyOut(o()):E.y<0&&v.dollyIn(o()),C.copy(P),g.update();break;case 3:if(g.enablePan===!1)return;if(A!==M.TOUCH_PAN)return;x.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(x,y),r(S.x,S.y),y.copy(x),g.update();break;default:A=M.NONE}}}function m(){g.enabled!==!1&&(g.dispatchEvent(k),A=M.NONE)}function p(e){e.preventDefault()}var v=new t(n);this.domElement=void 0!==i?i:document,Object.defineProperty(this,"constraint",{get:function(){return v}}),this.getPolarAngle=function(){return v.getPolarAngle()},this.getAzimuthalAngle=function(){return v.getAzimuthalAngle()},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var g=this,w=new e.Vector2,b=new e.Vector2,_=new e.Vector2,y=new e.Vector2,x=new e.Vector2,S=new e.Vector2,C=new e.Vector2,P=new e.Vector2,E=new e.Vector2,M={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=M.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var T={type:"change"},R={type:"start"},k={type:"end"};this.update=function(){this.autoRotate&&A===M.NONE&&v.rotateLeft(a()),v.update()===!0&&this.dispatchEvent(T)},this.reset=function(){A=M.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(T),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",p,!1),this.domElement.removeEventListener("mousedown",s,!1),this.domElement.removeEventListener("mousewheel",u,!1),this.domElement.removeEventListener("MozMousePixelScroll",u,!1),this.domElement.removeEventListener("touchstart",h,!1),this.domElement.removeEventListener("touchend",m,!1),this.domElement.removeEventListener("touchmove",f,!1),document.removeEventListener("mousemove",l,!1),document.removeEventListener("mouseup",d,!1),window.removeEventListener("keydown",c,!1)},this.domElement.addEventListener("contextmenu",p,!1),this.domElement.addEventListener("mousedown",s,!1),this.domElement.addEventListener("mousewheel",u,!1),this.domElement.addEventListener("MozMousePixelScroll",u,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",m,!1),this.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",c,!1),this.update()}var i=e.MOUSE;return i||(i={LEFT:0,MIDDLE:1,RIGHT:2}),n.prototype=Object.create(e.EventDispatcher.prototype),n.prototype.constructor=n,Object.defineProperties(n.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(e){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(e)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(e){this.constraint.minDistance=e}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(e){this.constraint.maxDistance=e}},minZoom:{get:function(){return this.constraint.minZoom},set:function(e){this.constraint.minZoom=e}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(e){this.constraint.maxZoom=e}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(e){this.constraint.minPolarAngle=e}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(e){this.constraint.maxPolarAngle=e}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(e){this.constraint.minAzimuthAngle=e}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(e){this.constraint.maxAzimuthAngle=e}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(e){this.constraint.enableDamping=e}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(e){this.constraint.dampingFactor=e}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}}),n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:o["default"].LinearFilter,magFilter:o["default"].LinearFilter,format:o["default"].RGBAFormat,stencilBuffer:!1},i=e.getSize();t=new o["default"].WebGLRenderTarget(i.width,i.height,n)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===o["default"].CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new o["default"].ShaderPass(o["default"].CopyShader)},r(o["default"].EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,n,i=!1,r=this.passes.length;for(n=0;n<r;n++)if(t=this.passes[n],t.enabled!==!1){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==o["default"].MaskPass&&(t instanceof o["default"].MaskPass?i=!0:t instanceof o["default"].ClearMaskPass&&(i=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),o["default"].Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},r(o["default"].Pass.prototype,{setSize:function(e,t){},render:function(e,t,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].MaskPass=function(e,t){o["default"].Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},o["default"].MaskPass.prototype=r(Object.create(o["default"].Pass.prototype),{constructor:o["default"].MaskPass,render:function(e,t,n,i,r){var a=e.context,o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);var s,l;this.inverse?(s=0,l=1):(s=1,l=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,s,4294967295),o.buffers.stencil.setClear(l),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP)}}),o["default"].ClearMaskPass=function(){o["default"].Pass.call(this),this.needsSwap=!1},o["default"].ClearMaskPass.prototype=Object.create(o["default"].Pass.prototype),r(o["default"].ClearMaskPass.prototype,{render:function(e,t,n,i,r){e.state.buffers.stencil.setTest(!1)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].RenderPass=function(e,t,n,i,r){o["default"].Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.needsSwap=!1},o["default"].RenderPass.prototype=r(Object.create(o["default"].Pass.prototype),{constructor:o["default"].RenderPass,render:function(e,t,n,i,r){this.scene.overrideMaterial=this.overrideMaterial;var a,o;this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(a,o),this.scene.overrideMaterial=null}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].SavePass=function(e){o["default"].Pass.call(this),void 0===o["default"].CopyShader&&console.error("THREE.SavePass relies on THREE.CopyShader");var t=o["default"].CopyShader;this.textureID="tDiffuse",this.uniforms=o["default"].UniformsUtils.clone(t.uniforms),this.material=new o["default"].ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderTarget=e,void 0===this.renderTarget&&(this.renderTargetParameters={minFilter:o["default"].LinearFilter,magFilter:o["default"].LinearFilter,format:o["default"].RGBFormat,stencilBuffer:!1},this.renderTarget=new o["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.renderTargetParameters)),this.needsSwap=!1,this.camera=new o["default"].OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new o["default"].Scene,this.quad=new o["default"].Mesh(new o["default"].PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},o["default"].SavePass.prototype=r(Object.create(o["default"].Pass.prototype),{constructor:o["default"].SavePass,render:function(e,t,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,e.render(this.scene,this.camera,this.renderTarget,this.clear)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].ShaderPass=function(e,t){o["default"].Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof o["default"].ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=o["default"].UniformsUtils.clone(e.uniforms),this.material=new o["default"].ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new o["default"].OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new o["default"].Scene,this.quad=new o["default"].Mesh(new o["default"].PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},o["default"].ShaderPass.prototype=r(Object.create(o["default"].Pass.prototype),{constructor:o["default"].ShaderPass,render:function(e,t,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(1),o=i(a);o["default"].TexturePass=function(e,t){o["default"].Pass.call(this),void 0===o["default"].CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var n=o["default"].CopyShader;this.uniforms=o["default"].UniformsUtils.clone(n.uniforms),this.uniforms.opacity.value=void 0!==t?t:1,this.uniforms.tDiffuse.value=e,this.material=new o["default"].ShaderMaterial({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),this.needsSwap=!1,this.camera=new o["default"].OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new o["default"].Scene,this.quad=new o["default"].Mesh(new o["default"].PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},o["default"].TexturePass.prototype=r(Object.create(o["default"].Pass.prototype),{constructor:o["default"].TexturePass,render:function(e,t,n,i,r){this.quad.material=this.material,e.render(this.scene,this.camera,n,this.clear)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].BlendShader={uniforms:{tDiffuse1:{value:null},tDiffuse2:{value:null},mixRatio:{value:.5},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","varying vec2 vUv;","void main() {","vec4 texel1 = texture2D( tDiffuse1, vUv );","vec4 texel2 = texture2D( tDiffuse2, vUv );","gl_FragColor = opacity * mix( texel1, texel2, mixRatio );","}"].join("\n")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=t.dat={};i.gui=i.gui||{},i.utils=i.utils||{},i.controllers=i.controllers||{},i.dom=i.dom||{},i.color=i.color||{},i.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",
n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),i.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},each:function(t,n,i){if(t)if(e&&t.forEach&&t.forEach===e)t.forEach(n,i);else if(t.length===t.length+0){for(var r=0,a=t.length;r<a;r++)if(r in t&&n.call(i,t[r],r)===this.BREAK)return}else for(var r in t)if(n.call(i,t[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),i.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(i.utils.common),i.dom.dom=function(e){function t(t){if("0"===t||e.isUndefined(t))return 0;var n=t.match(r);return e.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};e.each(n,function(t,n){e.each(t,function(e){i[e]=n})});var r=/(\d+(\.\d+)?)px/,a={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,i){e.isUndefined(n)&&(n=!0),e.isUndefined(i)&&(i=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,n,r,a){r=r||{};var o=i[n];if(!o)throw new Error("Event type "+n+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":var l=r.x||r.clientX||0,d=r.y||r.clientY||0;s.initMouseEvent(n,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,d,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;e.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(n,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(n,r.bubbles||!1,r.cancelable||!0)}e.defaults(s,a),t.dispatchEvent(s)},bind:function(e,t,n,i){return i=i||!1,e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),a},unbind:function(e,t,n,i){return i=i||!1,e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),a},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)==-1&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return a},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);i!=-1&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return a},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return t(n["border-left-width"])+t(n["border-right-width"])+t(n["padding-left"])+t(n["padding-right"])+t(n.width)},getHeight:function(e){var n=getComputedStyle(e);return t(n["border-top-width"])+t(n["border-bottom-width"])+t(n["padding-top"])+t(n["padding-bottom"])+t(n.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return a}(i.utils.common),i.controllers.OptionController=function(e,t,n){var i=function r(e,i,a){r.superclass.call(this,e,i);var o=this;if(this.__select=document.createElement("select"),n.isArray(a)){var s={};n.each(a,function(e){s[e]=e}),a=s}n.each(a,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),o.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;o.setValue(e)}),this.domElement.appendChild(this.__select)};return i.superclass=e,n.extend(i.prototype,e.prototype,{setValue:function(e){var t=i.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.NumberController=function(e,t){function n(e){return e=e.toString(),e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var i=function r(e,i,a){r.superclass.call(this,e,i),a=a||{},this.__min=a.min,this.__max=a.max,this.__step=a.step,t.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return i.superclass=e,t.extend(i.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=n(e),this}}),i}(i.controllers.Controller,i.utils.common),i.controllers.NumberControllerBox=function(e,t,n){function i(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var r=function a(e,i,r){function o(){var e=parseFloat(h.__input.value);n.isNaN(e)||h.setValue(e)}function s(){o(),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function l(e){t.bind(window,"mousemove",d),t.bind(window,"mouseup",u),c=e.clientY}function d(e){var t=c-e.clientY;h.setValue(h.getValue()+t*h.__impliedStep),c=e.clientY}function u(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",u)}this.__truncationSuspended=!1,a.superclass.call(this,e,i,r);var c,h=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",o),t.bind(this.__input,"blur",s),t.bind(this.__input,"mousedown",l),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():i(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(i.controllers.NumberController,i.dom.dom,i.utils.common),i.controllers.NumberControllerSlider=function(e,t,n,i,r){function a(e,t,n,i,r){return i+(r-i)*((e-t)/(n-t))}var o=function s(e,n,i,r,o){function l(e){t.bind(window,"mousemove",d),t.bind(window,"mouseup",u),d(e)}function d(e){e.preventDefault();var n=t.getOffset(c.__background),i=t.getWidth(c.__background);return c.setValue(a(e.clientX,n.left,n.left+i,c.__min,c.__max)),!1}function u(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",u),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}s.superclass.call(this,e,n,{min:i,max:r,step:o});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",l),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject(r)},i.extend(o.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(i.controllers.NumberController,i.dom.dom,i.utils.css,i.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),i.controllers.FunctionController=function(e,t,n){var i=function r(e,n,i){r.superclass.call(this,e,n);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),a.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=e,n.extend(i.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.BooleanController=function(e,t,n){var i=function r(e,n){function i(){a.setValue(!a.__prev)}r.superclass.call(this,e,n);var a=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=e,n.extend(i.prototype,e.prototype,{setValue:function(e){var t=i.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(i.utils.common),i.color.interpret=function(e,t){var n,i,r=function(){i=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(a,function(r){if(r.litmus(e))return t.each(r.conversions,function(r,a){if(n=r.read(e),i===!1&&n!==!1)return i=n,n.conversionName=a,n.conversion=r,t.BREAK}),t.BREAK}),i},a=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return r}(i.color.toString,i.utils.common),i.GUI=i.gui.GUI=function(e,t,i,r,a,o,s,l,d,u,c,h,f,m,p){function v(e,t,i,o){if(void 0===t[i])throw new Error("Object "+t+' has no property "'+i+'"');var s;if(o.color)s=new c(t,i);else{var l=[t,i].concat(o.factoryArgs);s=r.apply(e,l)}o.before instanceof a&&(o.before=o.before.__li),b(e,s),m.addClass(s.domElement,"c");var d=document.createElement("span");m.addClass(d,"property-name"),d.innerHTML=s.property;var u=document.createElement("div");u.appendChild(d),u.appendChild(s.domElement);var h=g(e,u,o.before);return m.addClass(h,j.CLASS_CONTROLLER_ROW),m.addClass(h,n(s.getValue())),w(e,h,s),e.__controllers.push(s),s}function g(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,params.before):e.__ul.appendChild(i),e.onResize(),i}function w(e,t,n){if(n.__li=t,n.__gui=e,p.extend(n,{options:function(t){return arguments.length>1?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(t)||p.isObject(t)?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof d){var i=new l(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),r.apply(i,e)}}),m.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof l){var r=function(t){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=p.compose(r,n.min),n.max=p.compose(r,n.max)}else n instanceof o?(m.bind(t,"click",function(){m.fakeEvent(n.__checkbox,"click")}),m.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof s?(m.bind(t,"click",function(){m.fakeEvent(n.__button,"click")}),m.bind(t,"mouseover",function(){m.addClass(n.__button,"hover")}),m.bind(t,"mouseout",function(){m.removeClass(n.__button,"hover")})):n instanceof c&&(m.addClass(t,"color"),n.updateDisplay=p.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&M(e.getRoot(),!0),t},n.setValue)}function b(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(i!=-1){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){var a,o=n.load.remembered;if(o[e.preset])a=o[e.preset];else{if(!o[L])return;a=o[L]}if(a[i]&&void 0!==a[i][t.property]){var s=a[i][t.property];t.initialValue=s,t.setValue(s)}}}}function _(e,t){return document.location.href+"."+t}function y(e){var t=e.__save_row=document.createElement("li");m.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),m.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",m.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",m.addClass(i,"button"),m.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",m.addClass(r,"button"),m.addClass(r,"save-as");var a=document.createElement("span");a.innerHTML="Revert",m.addClass(a,"button"),m.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?p.each(e.load.remembered,function(t,n){P(e,n,n==e.preset)}):P(e,L,!1),m.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(o),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(a),D){var s,l,d;!function(){var t=function(){l.style.display=e.useLocalStorage?"block":"none"};s=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain"),s.style.display="block",d=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(_(e,"isLocal"))&&d.setAttribute("checked","checked"),t(),m.bind(d,"change",function(){e.useLocalStorage=!e.useLocalStorage,t()})}()}var u=document.getElementById("dg-new-constructor");m.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||T.hide()}),m.bind(n,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),T.show(),u.focus(),u.select()}),m.bind(i,"click",function(){e.save()}),m.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),m.bind(a,"click",function(){e.revert()})}function x(e){function t(t){return t.preventDefault(),r=t.clientX,m.addClass(e.__closeButton,j.CLASS_DRAG),m.bind(window,"mousemove",n),m.bind(window,"mouseup",i),!1}function n(t){return t.preventDefault(),e.width+=r-t.clientX,e.onResize(),r=t.clientX,!1}function i(){m.removeClass(e.__closeButton,j.CLASS_DRAG),m.unbind(window,"mousemove",n),m.unbind(window,"mouseup",i)}e.__resize_handle=document.createElement("div"),p.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;m.bind(e.__resize_handle,"mousedown",t),m.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function S(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function C(e,t){var n={};return p.each(e.__rememberedObjects,function(i,r){var a={},o=e.__rememberedObjectIndecesToControllers[r];p.each(o,function(e,n){a[n]=t?e.initialValue:e.getValue()}),n[r]=a}),n}function P(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function E(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}function M(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];t?n.innerHTML=n.value+"*":n.innerHTML=n.value}function A(e){0!=e.length&&h(function(){A(e)}),p.each(e,function(e){e.updateDisplay()})}e.inject(i);var T,R,k="dg",O=72,U=20,L="Default",D=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),z=!0,F=!1,B=[],j=function N(e){function t(){var e=n.getRoot();e.width+=1,p.defer(function(){e.width-=1})}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),m.addClass(this.domElement,k),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=p.defaults(e,{autoPlace:!0,width:N.DEFAULT_WIDTH}),e=p.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),p.isUndefined(e.load)?e.load={preset:L}:e.preset&&(e.load.preset=e.preset),p.isUndefined(e.parent)&&e.hideable&&B.push(this),e.resizable=p.isUndefined(e.parent)&&e.resizable,e.autoPlace&&p.isUndefined(e.scrollable)&&(e.scrollable=!0);var i,r=D&&"true"===localStorage.getItem(_(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:e.load.preset},set:function(t){n.parent?n.getRoot().preset=t:e.load.preset=t,E(this),n.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,S(n,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,o&&(o.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?m.addClass(n.__ul,N.CLASS_CLOSED):m.removeClass(n.__ul,N.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?N.TEXT_OPEN:N.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return r},set:function(e){D&&(r=e,e?m.bind(window,"unload",i):m.unbind(window,"unload",i),localStorage.setItem(_(n,"isLocal"),e))}}}),p.isUndefined(e.parent)){if(e.closed=!1,m.addClass(this.domElement,N.CLASS_MAIN),m.makeSelectable(this.domElement,!1),D&&r){n.useLocalStorage=!0;var a=localStorage.getItem(_(this,"gui"));a&&(e.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=N.TEXT_CLOSED,m.addClass(this.__closeButton,N.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),m.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===e.closed&&(e.closed=!0);var o=document.createTextNode(e.name);m.addClass(o,"controller-name");var s=g(n,o),l=function(e){return e.preventDefault(),n.closed=!n.closed,!1};m.addClass(this.__ul,N.CLASS_CLOSED),m.addClass(s,"title"),m.bind(s,"click",l),e.closed||(this.closed=!1)}e.autoPlace&&(p.isUndefined(e.parent)&&(z&&(R=document.createElement("div"),m.addClass(R,k),m.addClass(R,N.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(R),z=!1),R.appendChild(this.domElement),m.addClass(this.domElement,N.CLASS_AUTO_PLACE)),this.parent||S(n,e.width)),m.bind(window,"resize",function(){n.onResize()}),m.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),m.bind(this.__ul,"transitionend",function(){n.onResize()}),m.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),e.resizable&&x(this),i=function(){D&&"true"===localStorage.getItem(_(n,"isLocal"))&&localStorage.setItem(_(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=i;n.getRoot();e.parent||t()};return j.toggleHide=function(){F=!F,p.each(B,function(e){e.domElement.style.zIndex=F?-999:999,e.domElement.style.opacity=F?0:1})},j.CLASS_AUTO_PLACE="a",j.CLASS_AUTO_PLACE_CONTAINER="ac",j.CLASS_MAIN="main",j.CLASS_CONTROLLER_ROW="cr",j.CLASS_TOO_TALL="taller-than-window",j.CLASS_CLOSED="closed",j.CLASS_CLOSE_BUTTON="close-button",j.CLASS_DRAG="drag",j.DEFAULT_WIDTH=245,j.TEXT_CLOSED="Close Controls",j.TEXT_OPEN="Open Controls",m.bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==O&&e.keyCode!=O||j.toggleHide()},!1),p.extend(j.prototype,{add:function(e,t){return v(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return v(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;p.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&R.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new j(t);this.__folders[e]=n;var i=g(this,n.domElement);return m.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=m.getOffset(e.__ul).top,n=0;p.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=m.getHeight(t))}),window.innerHeight-t-U<n?(m.addClass(e.domElement,j.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-U+"px"):(m.removeClass(e.domElement,j.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&p.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(p.isUndefined(T)&&(T=new f,T.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;p.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&y(e),e.__rememberedObjects.indexOf(t)==-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&S(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=C(this)),e.folders={},p.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=C(this),M(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[L]=C(this,!0)),this.load.remembered[e]=C(this),this.preset=e,P(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){p.each(this.__controllers,function(t){this.getRoot().load.remembered?b(e||this.getRoot(),t):t.setValue(t.initialValue)},this),p.each(this.__folders,function(e){e.revert(e)}),e||M(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&A(this.__listening)}}),j}(i.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",i.controllers.factory=function(e,t,n,i,r,a,o){
return function(s,l){var d=s[l];return o.isArray(arguments[2])||o.isObject(arguments[2])?new e(s,l,arguments[2]):o.isNumber(d)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?new n(s,l,arguments[2],arguments[3]):new t(s,l,{min:arguments[2],max:arguments[3]}):o.isString(d)?new i(s,l):o.isFunction(d)?new r(s,l,""):o.isBoolean(d)?new a(s,l):void 0}}(i.controllers.OptionController,i.controllers.NumberControllerBox,i.controllers.NumberControllerSlider,i.controllers.StringController=function(e,t,n){var i=function r(e,n){function i(){o.setValue(o.__input.value)}function a(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}r.superclass.call(this,e,n);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",a),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.FunctionController,i.controllers.BooleanController,i.utils.common),i.controllers.Controller,i.controllers.BooleanController,i.controllers.FunctionController,i.controllers.NumberControllerBox,i.controllers.NumberControllerSlider,i.controllers.OptionController,i.controllers.ColorController=function(e,t,n,i,r){function a(e,t,n,i){e.style.background="",r.each(l,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "})}function o(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function d(e,s){function l(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",u)}function u(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",u)}function c(){var e=i(this.value);e!==!1?(p.__color.__state=e,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function h(){t.unbind(window,"mousemove",m),t.unbind(window,"mouseup",h)}function f(e){e.preventDefault();var n=t.getWidth(p.__saturation_field),i=t.getOffset(p.__saturation_field),r=(e.clientX-i.left+document.body.scrollLeft)/n,a=1-(e.clientY-i.top+document.body.scrollTop)/n;return a>1?a=1:a<0&&(a=0),r>1?r=1:r<0&&(r=0),p.__color.v=a,p.__color.s=r,p.setValue(p.__color.toOriginal()),!1}function m(e){e.preventDefault();var n=t.getHeight(p.__hue_field),i=t.getOffset(p.__hue_field),r=1-(e.clientY-i.top+document.body.scrollTop)/n;return r>1?r=1:r<0&&(r=0),p.__color.h=360*r,p.setValue(p.__color.toOriginal()),!1}d.superclass.call(this,e,s),this.__color=new n(this.getValue()),this.__temp=new n(0);var p=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&c.call(this)}),t.bind(this.__input,"blur",c),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(p.__selector,"drag")})});var v=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(v.style,{width:"100%",height:"100%",background:"none"}),a(v,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),o(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",l),t.bind(this.__field_knob,"mousedown",l),t.bind(this.__hue_field,"mousedown",function(e){m(e),t.bind(window,"mousemove",m),t.bind(window,"mouseup",h)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,r.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=i(this.getValue());if(e!==!1){var t=!1;r.each(n.COMPONENTS,function(n){if(!r.isUndefined(e[n])&&!r.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&r.extend(this.__color.__state,e)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,s=255-o;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,a(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return s}(i.controllers.Controller,i.dom.dom,i.color.Color=function(e,t,n,i){function r(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(o(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(o(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(s(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[t]=e}})}function o(e,n,r){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw"Corrupted color state";i.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function s(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);i.extend(e.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var l=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(l.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(l.prototype,"r",2),r(l.prototype,"g",1),r(l.prototype,"b",0),a(l.prototype,"h"),a(l.prototype,"s"),a(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),l}(i.color.interpret,i.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),a=n*(1-t),o=n*(1-r*t),s=n*(1-(1-r)*t),l=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var i,r,a=Math.min(e,t,n),o=Math.max(e,t,n),s=o-a;return 0==o?{h:NaN,s:0,v:0}:(r=s/o,i=e==o?(t-n)/s:t==o?2+(n-e)/s:4+(e-t)/s,i/=6,i<0&&(i+=1),{h:360*i,s:r,v:o/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,i){return i<<(e=8*n)|t&~(255<<e)}}}(),i.color.toString,i.utils.common),i.color.interpret,i.utils.common),i.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),i.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function i(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",i),e.unbind(t.domElement,"transitionend",i),e.unbind(t.domElement,"oTransitionEnd",i)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(i.dom.dom,i.utils.common),i.dom.dom,i.utils.common)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new a["default"].Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);a["default"].GPUParticleSystem=function(e){var t=this,e=e||{};t.PARTICLE_COUNT=e.maxParticles||1e6,t.PARTICLE_CONTAINERS=e.containerCount||1,t.PARTICLE_NOISE_TEXTURE=e.particleNoiseTex||null,t.PARTICLE_SPRITE_TEXTURE=e.particleSpriteTex||null,t.PARTICLES_PER_CONTAINER=Math.ceil(t.PARTICLE_COUNT/t.PARTICLE_CONTAINERS),t.PARTICLE_CURSOR=0,t.time=0;var n={vertexShader:["precision highp float;","const vec4 bitSh = vec4(256. * 256. * 256., 256. * 256., 256., 1.);","const vec4 bitMsk = vec4(0.,vec3(1./256.0));","const vec4 bitShifts = vec4(1.) / bitSh;","#define FLOAT_MAX\t1.70141184e38","#define FLOAT_MIN\t1.17549435e-38","lowp vec4 encode_float(highp float v) {","highp float av = abs(v);","//Handle special cases","if(av < FLOAT_MIN) {","return vec4(0.0, 0.0, 0.0, 0.0);","} else if(v > FLOAT_MAX) {","return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;","} else if(v < -FLOAT_MAX) {","return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;","}","highp vec4 c = vec4(0,0,0,0);","//Compute exponent and mantissa","highp float e = floor(log2(av));","highp float m = av * pow(2.0, -e) - 1.0;","c[1] = floor(128.0 * m);","m -= c[1] / 128.0;","c[2] = floor(32768.0 * m);","m -= c[2] / 32768.0;","c[3] = floor(8388608.0 * m);","//Unpack exponent","highp float ebias = e + 127.0;","c[0] = floor(ebias / 2.0);","ebias -= c[0] * 2.0;","c[1] += floor(ebias) * 128.0;","//Unpack sign bit","c[0] += 128.0 * step(0.0, -v);","//Scale back to range","return c / 255.0;","}","vec4 pack(const in float depth)","{","const vec4 bit_shift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);","const vec4 bit_mask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);","vec4 res = mod(depth*bit_shift*vec4(255), vec4(256))/vec4(255);","res -= res.xxyz * bit_mask;","return res;","}","float unpack(const in vec4 rgba_depth)","{","const vec4 bit_shift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);","float depth = dot(rgba_depth, bit_shift);","return depth;","}","uniform float uTime;","uniform float uScale;","uniform sampler2D tNoise;","attribute vec4 particlePositionsStartTime;","attribute vec4 particleVelColSizeLife;","varying vec4 vColor;","varying float lifeLeft;","void main() {","// unpack things from our attributes","vColor = encode_float( particleVelColSizeLife.y );","// convert our velocity back into a value we can use","vec4 velTurb = encode_float( particleVelColSizeLife.x );","vec3 velocity = vec3( velTurb.xyz );","float turbulence = velTurb.w;","vec3 newPosition;","float timeElapsed = uTime - particlePositionsStartTime.a;","lifeLeft = 1. - (timeElapsed / particleVelColSizeLife.w);","gl_PointSize = ( uScale * particleVelColSizeLife.z ) * lifeLeft;","velocity.x = ( velocity.x - .5 ) * 3.;","velocity.y = ( velocity.y - .5 ) * 3.;","velocity.z = ( velocity.z - .5 ) * 3.;","newPosition = particlePositionsStartTime.xyz + ( velocity * 10. ) * ( uTime - particlePositionsStartTime.a );","vec3 noise = texture2D( tNoise, vec2( newPosition.x * .015 + (uTime * .05), newPosition.y * .02 + (uTime * .015) )).rgb;","vec3 noiseVel = ( noise.rgb - .5 ) * 30.;","newPosition = mix(newPosition, newPosition + vec3(noiseVel * ( turbulence * 5. ) ), (timeElapsed / particleVelColSizeLife.a) );","if( velocity.y > 0. && velocity.y < .05 ) {","lifeLeft = 0.;","}","if( velocity.x < -1.45 ) {","lifeLeft = 0.;","}","if( timeElapsed > 0. ) {","gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );","} else {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","lifeLeft = 0.;","gl_PointSize = 0.;","}","}"].join("\n"),fragmentShader:["float scaleLinear(float value, vec2 valueDomain) {","return (value - valueDomain.x) / (valueDomain.y - valueDomain.x);","}","float scaleLinear(float value, vec2 valueDomain, vec2 valueRange) {","return mix(valueRange.x, valueRange.y, scaleLinear(value, valueDomain));","}","varying vec4 vColor;","varying float lifeLeft;","uniform sampler2D tSprite;","void main() {","float alpha = 0.;","if( lifeLeft > .995 ) {","alpha = scaleLinear( lifeLeft, vec2(1., .995), vec2(0., 1.));//mix( 0., 1., ( lifeLeft - .95 ) * 100. ) * .75;","} else {","alpha = lifeLeft * .75;","}","vec4 tex = texture2D( tSprite, gl_PointCoord );","gl_FragColor = vec4( vColor.rgb * tex.a, alpha * tex.a );","}"].join("\n")};t.rand=[];for(var i=1e5;i>0;i--)t.rand.push(Math.random()-.5);t.random=function(){return++i>=t.rand.length?t.rand[i=1]:t.rand[i]};var r=new a["default"].TextureLoader;t.particleNoiseTex=t.PARTICLE_NOISE_TEXTURE||r.load("img/perlin-512.png"),t.particleNoiseTex.wrapS=t.particleNoiseTex.wrapT=a["default"].RepeatWrapping,t.particleSpriteTex=t.PARTICLE_SPRITE_TEXTURE||r.load("img/particle2.png"),t.particleSpriteTex.wrapS=t.particleSpriteTex.wrapT=a["default"].RepeatWrapping,t.particleShaderMat=new a["default"].ShaderMaterial({transparent:!0,depthWrite:!1,uniforms:{uTime:{value:0},uScale:{value:1},tNoise:{value:t.particleNoiseTex},tSprite:{value:t.particleSpriteTex}},blending:a["default"].AdditiveBlending,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),t.particleShaderMat.defaultAttributeValues.particlePositionsStartTime=[0,0,0,0],t.particleShaderMat.defaultAttributeValues.particleVelColSizeLife=[0,0,0,0],t.particleContainers=[],a["default"].Object3D.apply(this,arguments),this.init=function(){for(var e=0;e<t.PARTICLE_CONTAINERS;e++){var n=new a["default"].GPUParticleContainer(t.PARTICLES_PER_CONTAINER,t);t.particleContainers.push(n),t.add(n)}},this.spawnParticle=function(e){t.PARTICLE_CURSOR++,t.PARTICLE_CURSOR>=t.PARTICLE_COUNT&&(t.PARTICLE_CURSOR=1);var n=t.particleContainers[Math.floor(t.PARTICLE_CURSOR/t.PARTICLES_PER_CONTAINER)];n.spawnParticle(e)},this.update=function(e){for(var n=0;n<t.PARTICLE_CONTAINERS;n++)t.particleContainers[n].update(e)},this.init()},a["default"].GPUParticleSystem.prototype=Object.create(a["default"].Object3D.prototype),a["default"].GPUParticleSystem.prototype.constructor=a["default"].GPUParticleSystem,a["default"].GPUParticleContainer=function(e,t){function n(e,t,n,i){return o[0]=Math.floor(i),o[1]=Math.floor(n),o[2]=Math.floor(t),o[3]=Math.floor(e),s[0]}function i(e){var t=e>>16,n=(65280&e)>>8,i=255&e;return t>0&&t--,n>0&&n--,i>0&&i--,[t,n,i]}var r=this;r.PARTICLE_COUNT=e||1e5,r.PARTICLE_CURSOR=0,r.time=0,r.DPR=window.devicePixelRatio,r.GPUParticleSystem=t;Math.floor(r.PARTICLE_COUNT/r.MAX_ATTRIBUTES);a["default"].Object3D.apply(this,arguments);var o=new Uint8Array(4),s=new Float32Array(o.buffer);r.particles=[],r.deadParticles=[],r.particlesAvailableSlot=[],r.particleUpdate=!1,r.particleShaderGeo=new a["default"].BufferGeometry,r.particleVertices=new Float32Array(3*r.PARTICLE_COUNT),r.particlePositionsStartTime=new Float32Array(4*r.PARTICLE_COUNT),r.particleVelColSizeLife=new Float32Array(4*r.PARTICLE_COUNT);for(var l=0;l<r.PARTICLE_COUNT;l++)r.particlePositionsStartTime[4*l+0]=100,r.particlePositionsStartTime[4*l+1]=0,r.particlePositionsStartTime[4*l+2]=0,r.particlePositionsStartTime[4*l+3]=0,r.particleVertices[3*l+0]=0,r.particleVertices[3*l+1]=0,r.particleVertices[3*l+2]=0,r.particleVelColSizeLife[4*l+0]=n(128,128,0,0),r.particleVelColSizeLife[4*l+1]=n(0,254,0,254),r.particleVelColSizeLife[4*l+2]=1,r.particleVelColSizeLife[4*l+3]=0;r.particleShaderGeo.addAttribute("position",new a["default"].BufferAttribute(r.particleVertices,3)),r.particleShaderGeo.addAttribute("particlePositionsStartTime",new a["default"].BufferAttribute(r.particlePositionsStartTime,4).setDynamic(!0)),r.particleShaderGeo.addAttribute("particleVelColSizeLife",new a["default"].BufferAttribute(r.particleVelColSizeLife,4).setDynamic(!0)),r.posStart=r.particleShaderGeo.getAttribute("particlePositionsStartTime"),r.velCol=r.particleShaderGeo.getAttribute("particleVelColSizeLife"),r.particleShaderMat=r.GPUParticleSystem.particleShaderMat,this.init=function(){r.particleSystem=new a["default"].Points(r.particleShaderGeo,r.particleShaderMat),r.particleSystem.frustumCulled=!1,this.add(r.particleSystem)};var l,d=new a["default"].Vector3,u=new a["default"].Vector3,c=0,h=0,f=16777215,m=0,p=0,v=0,g=2,w=250;this.offset=0,this.count=0,this.spawnParticle=function(e){e=e||{},d=void 0!==e.position?d.copy(e.position):d.set(0,0,0),u=void 0!==e.velocity?u.copy(e.velocity):u.set(0,0,0),c=void 0!==e.positionRandomness?e.positionRandomness:0,h=void 0!==e.velocityRandomness?e.velocityRandomness:0,f=void 0!==e.color?e.color:16777215,m=void 0!==e.colorRandomness?e.colorRandomness:1,y=void 0!==e.turbulence?e.turbulence:1,p=void 0!==e.lifetime?e.lifetime:5,v=void 0!==e.size?e.size:10;var a=void 0!==e.sizeRandomness?e.sizeRandomness:0,o=void 0!==e.smoothPosition&&e.smoothPosition;void 0!==r.DPR&&(v*=r.DPR),l=r.PARTICLE_CURSOR,r.posStart.array[4*l+0]=d.x+t.random()*c,r.posStart.array[4*l+1]=d.y+t.random()*c,r.posStart.array[4*l+2]=d.z+t.random()*c,r.posStart.array[4*l+3]=r.time+.02*t.random(),o===!0&&(r.posStart.array[4*l+0]+=-(u.x*t.random()),r.posStart.array[4*l+1]+=-(u.y*t.random()),r.posStart.array[4*l+2]+=-(u.z*t.random()));var s=u.x+t.random()*h,b=u.y+t.random()*h,_=u.z+t.random()*h,y=Math.floor(254*y);s=Math.floor(w*((s- -g)/(g- -g))),b=Math.floor(w*((b- -g)/(g- -g))),_=Math.floor(w*((_- -g)/(g- -g))),r.velCol.array[4*l+0]=n(s,b,_,y);for(var x=i(f),S=0;S<x.length;S++)x[S]=Math.floor(x[S]+t.random()*m*254),x[S]>254&&(x[S]=254),x[S]<0&&(x[S]=0);r.velCol.array[4*l+1]=n(x[0],x[1],x[2],254),r.velCol.array[4*l+2]=v+t.random()*a,r.velCol.array[4*l+3]=p,0==this.offset&&(this.offset=r.PARTICLE_CURSOR),r.count++,r.PARTICLE_CURSOR++,r.PARTICLE_CURSOR>=r.PARTICLE_COUNT&&(r.PARTICLE_CURSOR=0),r.particleUpdate=!0},this.update=function(e){r.time=e,r.particleShaderMat.uniforms.uTime.value=e,this.geometryUpdate()},this.geometryUpdate=function(){1==r.particleUpdate&&(r.particleUpdate=!1,r.offset+r.count<r.PARTICLE_COUNT?(r.posStart.updateRange.offset=r.velCol.updateRange.offset=4*r.offset,r.posStart.updateRange.count=r.velCol.updateRange.count=4*r.count):(r.posStart.updateRange.offset=0,r.posStart.updateRange.count=r.velCol.updateRange.count=4*r.PARTICLE_COUNT),r.posStart.needsUpdate=!0,r.velCol.needsUpdate=!0,r.offset=0,r.count=0)},this.init()},a["default"].GPUParticleContainer.prototype=Object.create(a["default"].Object3D.prototype),a["default"].GPUParticleContainer.prototype.constructor=a["default"].GPUParticleContainer},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=i(a),s=function l(e,t,n){function i(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function a(e,t){t=t||{};var n=new o["default"].ShaderMaterial({uniforms:t,vertexShader:s(),fragmentShader:e});return i(n),n}function s(){return"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n"}function d(){return"uniform sampler2D texture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( texture, uv );\n\n}\n"}r(this,l),this.variables=[],this.currentTextureIndex=0;var u=new o["default"].Scene,c=new o["default"].Camera;c.position.z=1;var h={texture:{value:null}},f=a(d(),h),m=new o["default"].Mesh(new o["default"].PlaneBufferGeometry(2,2),f);u.add(m),this.addVariable=function(e,t,n){var i=this.createShaderMaterial(t),r={name:e,initialValueTexture:n,material:i,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:o["default"].NearestFilter,magFilter:o["default"].NearestFilter};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!n.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var i=0;i<this.variables.length;i++){var r=this.variables[i];r.renderTargets[0]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),r.renderTargets[1]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),this.renderTexture(r.initialValueTexture,r.renderTargets[0]),this.renderTexture(r.initialValueTexture,r.renderTargets[1]);var a=r.material,o=a.uniforms;if(null!==r.dependencies)for(var s=0;s<r.dependencies.length;s++){var l=r.dependencies[s];if(l.name!==r.name){for(var d=!1,u=0;u<this.variables.length;u++)if(l.name===this.variables[u].name){d=!0;break}if(!d)return"Variable dependency not found. Variable="+r.name+", dependency="+l.name}o[l.name]={value:null},a.fragmentShader="\nuniform sampler2D "+l.name+";\n"+a.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,i=this.variables.length;n<i;n++){var r=this.variables[n];if(null!==r.dependencies)for(var a=r.material.uniforms,o=0,s=r.dependencies.length;o<s;o++){var l=r.dependencies[o];a[l.name].value=l.renderTargets[e].texture}this.doRenderTarget(r.material,r.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=i,this.createShaderMaterial=a,this.createRenderTarget=function(n,i,r,a,s,l){n=n||e,i=i||t,r=r||o["default"].ClampToEdgeWrapping,a=a||o["default"].ClampToEdgeWrapping,s=s||o["default"].NearestFilter,l=l||o["default"].NearestFilter;var d=new o["default"].WebGLRenderTarget(n,i,{wrapS:r,wrapT:a,minFilter:s,magFilter:l,format:o["default"].RGBAFormat,type:o["default"].FloatType,stencilBuffer:!1});return d},this.createTexture=function(n,i){n=n||e,i=i||t;var r=new Float32Array(n*i*4),a=new o["default"].DataTexture(r,e,t,o["default"].RGBAFormat,o["default"].FloatType);return a.needsUpdate=!0,a},this.renderTexture=function(e,t){h.texture.value=e,this.doRenderTarget(f,t),h.texture.value=null},this.doRenderTarget=function(e,t){m.material=e,n.render(u,c,t),m.material=f}};t["default"]=s},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=function(){function e(){r(this,e),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.mesh=this.newMesh(),this.scene.add(this.mesh),this.animate()}return a(e,[{key:"newMesh",value:function(){var e=new s["default"].SphereGeometry(500,16,16),t=new s["default"].MeshBasicMaterial({color:16711680,wireframe:!0});return new s["default"].Mesh(e,t)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.mesh.rotation.x+=.01,this.mesh.rotation.y+=.02,this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l={x:512,y:512},d=function(){function e(){r(this,e),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.mesh=this.newMesh(),this.scene.add(this.mesh),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight);var e=window.innerWidth/l.x,t=window.innerHeight/l.y;e<t?this.camera.position.z=l.x/this.camera.aspect/(2*Math.tan(this.camera.fov/2*(Math.PI/180))):this.camera.position.z=l.y/(2*Math.tan(this.camera.fov/2*(Math.PI/180)))}},{key:"newMesh",value:function(){var e=new s["default"].PlaneBufferGeometry(l.x,l.y),t=new s["default"].MeshBasicMaterial({color:16711680,wireframe:!0});return new s["default"].Mesh(e,t)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=i(l),u=n(3),c=i(u),h={x:512,y:512},f="\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n       \n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",m="\n    \n    precision mediump float;\n\n    uniform float time;\n\n    uniform vec3 color;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time*4.0)), 1.0);\n    }\n\n",p=function(){
function e(){r(this,e),this.clock=new s["default"].Clock,this.stats=new c["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.mesh=this.newMesh(),this.scene.add(this.mesh),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight);var e=window.innerWidth/h.x,t=window.innerHeight/h.y;e<t?this.camera.position.z=h.x/this.camera.aspect/(2*Math.tan(this.camera.fov/2*(Math.PI/180))):this.camera.position.z=h.y/(2*Math.tan(this.camera.fov/2*(Math.PI/180)))}},{key:"newMesh",value:function(){var e=new s["default"].PlaneBufferGeometry(h.x,h.y),t=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0},color:{type:"c",value:new s["default"].Color((0,d["default"])())}},vertexShader:f,fragmentShader:m,blending:s["default"].AdditiveBlending,transparent:!0});return new s["default"].Mesh(e,t)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();this.clock.getDelta();this.mesh.material.uniforms.time.value=this.clock.elapsedTime,this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),function s(){return r(this,s),{uniforms:{tDiffuse:{value:null},brightness:{type:"f",value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n        }\n    ",fragmentShader:"\n\n        uniform sampler2D tDiffuse;\n        uniform float brightness;\n        varying vec2 vUv;\n        void main() {\n            vec4 color = texture2D( tDiffuse, vUv );\n            gl_FragColor = color.rgba * brightness;\n        }\n    "}});t["default"]=o},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=r(s),d=n(3),u=r(d),c=n(2),h=(r(c),n(23)),f=r(h);n(11),n(12),n(13),n(14),n(16),n(5),n(6),n(7),n(8),n(9),n(10);var m=n(15),p=i(m),v="\n\n   precision mediump float;\n\n    void main() {\n        gl_Position = vec4( position, 1.0 );\n    }\n    \n",g="\n   \n    precision mediump float;\n   \n    #define PI 3.1415926535\n    #define PI2 6.283185307\n    #define GR 1. / 1.61803399\n\n    #define TAU 6.28318530718\n    #define MAX_ITER 3\n\n    uniform vec2 resolution;\n    uniform float time;\n\n    void main() {\n\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        //vec2 p = mod(uv*TAU*2.0, TAU)-250.0;//tilling\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 3.0;\n        float inten = .005;\n        for (int n = 0; n < MAX_ITER; n++) \n        {\n            float t = time * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, 1.4);\n        vec3 color = vec3(pow(abs(c), 1.0));\n        color = clamp(color + vec3(0.6, 0.35, 0.8), 0.0, 1.0);\n        gl_FragColor = vec4(color, 1.0);\n      \n    }\n",w=function(){function e(){a(this,e),this.options={brightness:.8},this.clock=new l["default"].Clock,this.stats=new u["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new l["default"].Scene,this.camera=new l["default"].Camera;var t=new l["default"].PlaneBufferGeometry(2,2),n=new l["default"].ShaderMaterial({uniforms:{time:{value:1},resolution:{value:new l["default"].Vector2}},vertexShader:v,fragmentShader:g});this.plane=new l["default"].Mesh(t,n),this.scene.add(this.plane),this.renderer=new l["default"].WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.effectBrightness=new l["default"].ShaderPass(new f["default"]),this.effectBrightness.uniforms.brightness.value=this.options.brightness,this.effectBrightness.renderToScreen=!0,this.composer=new l["default"].EffectComposer(this.renderer,new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.renderPass=new l["default"].RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.composer.addPass(this.effectBrightness),this.gui=new p.dat.GUI,this.gui.add(this.options,"brightness",0,4).step(.1).onChange(function(){this.effectBrightness.uniforms.brightness.value=this.options.brightness}.bind(this)),document.body.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return o(e,[{key:"onWindowResize",value:function(){this.plane.material.uniforms.resolution.value.x=window.innerWidth,this.plane.material.uniforms.resolution.value.y=window.innerHeight,this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta();this.plane.material.uniforms.time.value+=e,this.composer.render(e)}}]),e}();t["default"]=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=i(l),u="\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",c="\n    \n    precision mediump float;\n\n    uniform float time;\n\n    uniform vec3 color;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time*4.0)), 1.0);\n    }\n\n",h=function(){function e(t,n){r(this,e),this.lifetime=0,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0},color:{type:"c",value:new s["default"].Color((0,d["default"])())}},vertexShader:u,fragmentShader:c,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=3*t,this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(3),d=i(l),u=n(4),c=i(u),h=n(25),f=i(h),m={x:512,y:512},p=function(){function e(){r(this,e),this.clock=new s["default"].Clock,this.stats=new d["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.rtt=new f["default"](m.x,m.y),this.mesh=this.newMesh(this.rtt),this.scene.add(this.mesh),this.controls=new((0,c["default"])(s["default"]))(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.enableZoom=!1,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"newMesh",value:function(){var e=new s["default"].SphereGeometry(500,30,30),t=new s["default"].MeshBasicMaterial({map:this.rtt.texture.texture});return new s["default"].Mesh(e,t)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta();this.rtt.render(this.renderer,e),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=i(l),u="\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",c="\n    \n    precision mediump float;\n\n    uniform float time;\n\n    uniform vec3 color;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n    }\n\n",h=function(){function e(t,n){r(this,e),this.lifetime=1,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0},color:{type:"c",value:new s["default"].Color((0,d["default"])())}},vertexShader:u,fragmentShader:c,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=10*t,this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(3),d=i(l),u=n(4),c=i(u),h=n(2),f=i(h),m=n(27),p=i(m),v={x:512,y:512},g=function(){function e(){r(this,e),this.clock=new s["default"].Clock,this.textureLoader=new s["default"].TextureLoader,this.stats=new d["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,document.body.appendChild(this.renderer.domElement),this.rtts=[new p["default"](v.x,v.y),new p["default"](v.x,v.y)];var t=new s["default"].AmbientLight(65793);this.scene.add(t),this.lights=[];for(var n=0;n<10;n++)this.lights[n]=new s["default"].PointLight((0,f["default"])(),1,5e3),this.lights[n].add(new s["default"].Mesh(new s["default"].SphereGeometry(12,8,8),new s["default"].MeshBasicMaterial({color:this.lights[n].color}))),this.scene.add(this.lights[n]);this.mesh=this.newMesh((0,f["default"])(),this.rtts[0]),this.scene.add(this.mesh),this.mesh2=this.newMesh((0,f["default"])(),this.rtts[1]),this.mesh2.position.set(1100,0,0),this.scene.add(this.mesh2),this.controls=new((0,c["default"])(s["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"newMesh",value:function(e,t){var n=new s["default"].SphereGeometry(500,60,60),i=new s["default"].MeshPhongMaterial({color:e,map:t.texture.texture,shininess:10,envMap:this.textureLoader.load("img/stars.png"),specular:6710886,specularMap:t.texture.texture,side:s["default"].DoubleSide});return new s["default"].Mesh(n,i)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();for(var e=this.clock.getDelta(),t=5e-4*Date.now(),n=0,i=this.lights.length;n<i;n++)this.lights[n].position.x=this.mesh.position.x+900*Math.sin(500*n+7*t),this.lights[n].position.y=this.mesh.position.y+900*Math.cos(500*n+5*t),this.lights[n].position.z=this.mesh.position.z+900*Math.cos(500*n+3*t);var r=!0,a=!1,o=void 0;try{for(var s,l=this.rtts[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var d=s.value;d.render(this.renderer,e)}}catch(u){a=!0,o=u}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw o}}this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=(i(l),"\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n"),u="\n    \n    precision mediump float;\n\n    uniform float time;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( vec3(1.0).rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n    }\n\n",c=function(){function e(t,n){r(this,e),this.lifetime=1,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0}},vertexShader:d,fragmentShader:u,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=10*t,this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(3),d=i(l),u=n(4),c=i(u),h=n(2),f=i(h),m=n(29),p=i(m),v={x:128,y:128},g=[{radius:7,distance:22,speed:9.6},{radius:9,distance:42,speed:8.3},{radius:6,distance:60,speed:11},{radius:13,distance:82,speed:12},{radius:8,distance:106,speed:5},{radius:10,distance:130,speed:5.5},{radius:9,distance:155,speed:6.7},{radius:7,distance:178,speed:4.2},{radius:8,distance:200,speed:3}],w=function(){function e(){r(this,e),this.clock=new s["default"].Clock,this.stats=new d["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new s["default"].WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s["default"].PCFSoftShadowMap,document.body.appendChild(this.renderer.domElement),this.rtt=new p["default"](v.x,v.y);var t=new s["default"].AmbientLight(3355443);this.scene.add(t),this.sun=new s["default"].PointLight(16777113,2,5e4),this.sun.add(new s["default"].Mesh(new s["default"].SphereGeometry(2,16,16),new s["default"].MeshBasicMaterial({color:this.sun.color}))),this.scene.add(this.sun),this.sun.castShadow=!0,this.meshes=[];for(var n=0,i=g.length;n<i;n++)this.meshes.push(this.newMesh((0,f["default"])(),g[n].radius)),this.scene.add(this.meshes[n]);this.controls=new((0,c["default"])(s["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"newMesh",value:function(e,t){var n=new s["default"].SphereGeometry(t,12,12),i=new s["default"].MeshPhongMaterial({color:e,map:this.rtt.texture.texture,shininess:10,specular:3355443}),r=new s["default"].Mesh(n,i);return r.castShadow=!0,r.receiveShadow=!0,r}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();for(var e=this.clock.getDelta(),t=5e-4*Date.now(),n=0,i=this.meshes.length;n<i;n++){var r=this.meshes[n];r.position.x=Math.sin(t*g[n].speed*.1)*g[n].distance,r.position.z=Math.cos(t*g[n].speed*.1)*g[n].distance}this.rtt.render(this.renderer,e),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=(i(l),"\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n"),u="\n    \n    // Awesome Shader from Nicolas barradeau (chladni patterns)\n    // http://thebookofshaders.com/edit.php?log=160601182629 \n\n    precision mediump float;\n   \n    #define PI 3.1415926535897932384626433832795\n    #define GR 1. / 1.61803399\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main() {\n        \n        vec2 st = vUv * 2.0;\n\n        float iteration = 20. + smoothstep( -1., 1., sin( PI * 2. * ( time * 0.1 ) ) ) * 20.;\n        st.y -= GR;\n        \n        vec2 t = vec2( abs(sin( PI * time *0.1 ) ) );\n        \n        float sqi = sqrt( iteration );\n        \n        float a = sqi * sin( time * 0.01 );\n        float b = sqi * cos( time * 0.005 );\n        \n        mat2 m = mat2(  cos( a * PI * st.x ), \n                        cos( (b+a) * PI * st.y ), \n                       -cos( b * PI * st.x ), \n                        cos( a * PI * st.y ) );\n        \n        st = t * m;\n        float len = length( st );\n        \n        vec3 color = mix( vec3(0.92,0.83,0.60), vec3(1.,0.94,0.69), smoothstep( 1.0, 1.01, len ) );\n        color += .1 * vec3(0.95,0.86,0.69) * smoothstep( 0.5,.51, len );\n        \n        gl_FragColor = vec4(color,1.0);\n        \n    }\n\n",c=function(){function e(t,n){r(this,e),this.lifetime=1,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0}},vertexShader:d,fragmentShader:u,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=10*t,this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(3),d=i(l),u=n(4),c=i(u),h=n(2),f=i(h),m=n(31),p=i(m),v=n(33),g=i(v),w={x:128,y:128},b=[{radius:7,distance:22,speed:9.6},{radius:9,distance:42,speed:8.3},{radius:6,distance:60,speed:11},{radius:13,distance:82,speed:12},{radius:8,distance:106,speed:5},{radius:10,distance:130,speed:5.5},{radius:9,distance:155,speed:6.7},{radius:7,distance:178,speed:4.2},{radius:8,distance:200,speed:3}],_=function(){function e(){r(this,e),this.clock=new s["default"].Clock,this.stats=new d["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new s["default"].Scene,this.camera=new s["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=40,this.camera.position.y=50,this.camera.lookAt(new s["default"].Vector3(0,0,0)),this.renderer=new s["default"].WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s["default"].PCFSoftShadowMap,document.body.appendChild(this.renderer.domElement),this.rtt=new p["default"](w.x,w.y);var t=new s["default"].AmbientLight(3355443);this.scene.add(t),this.sun=new g["default"](this.scene),this.meshes=[];for(var n=0,i=b.length;n<i;n++)this.meshes.push(this.newMesh((0,f["default"])(),b[n].radius)),this.scene.add(this.meshes[n]);this.controls=new((0,c["default"])(s["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return a(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"newMesh",value:function(e,t){var n=new s["default"].SphereGeometry(t,12,12),i=new s["default"].MeshPhongMaterial({color:e,map:this.rtt.texture.texture,shininess:10,specular:3355443}),r=new s["default"].Mesh(n,i);return r.castShadow=!0,r.receiveShadow=!0,r}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();for(var e=this.clock.getDelta(),t=5e-4*Date.now(),n=0,i=this.meshes.length;n<i;n++){var r=this.meshes[n];r.position.x=Math.sin(t*b[n].speed*.1)*b[n].distance,r.position.z=Math.cos(t*b[n].speed*.1)*b[n].distance}this.sun.rays.lookAt(this.camera.position),this.sun.update(this.clock.elapsedTime),this.rtt.render(this.renderer,e),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l="\n\n   precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",d="\n\n    precision mediump float;\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main( void ) {\n        vec3 color = vec3(1.0, 1.0, 0.8);\n        float alpha = 0.0;\n        alpha += ( 1.0 - distance(vUv, vec2(.5,.5) ) * 2.0 + sin(time*10.0)*.02 ) * .2;\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 6.0 + sin(    time*30.0)*.1 ) * .1, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(3.14 +time*3.0)*.2 ) * .3, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(      time*12.0)*.01 ) * .6, 0.0, 1.0);\n        // alpha *= .7;\n        // alpha = clamp(alpha, 0.0, 100.0);\n        gl_FragColor = vec4( color.rgb, alpha );\n    }\n",u="\n    \n    precision mediump float;\n\n    uniform float time;\n    \n    varying vec2 vUv;\n\n    void main () {\n        vec3 color = vec3(1.0, 1.0, .8);\n        gl_FragColor = vec4( vec3(.7, .5, .2) + color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n        // gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n    }\n",c=function(){function e(t){r(this,e),this.radius=9,this.raydius=72,this.light=new s["default"].PointLight(16777113,2,5e4),this.lightMesh=new s["default"].Mesh(new s["default"].SphereGeometry(this.radius,16,16),new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:u,transparent:!0,blending:"AdditiveBlending"})),this.light.add(this.lightMesh),this.light.castShadow=!0,t.add(this.light);var n=new s["default"].PlaneBufferGeometry(this.raydius,this.raydius),i=new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:d,transparent:!0,blending:"AdditiveBlending",alphaTest:.1});this.rays=new s["default"].Mesh(n,i),t.add(this.rays)}return a(e,[{key:"update",value:function(e){this.lightMesh.material.uniforms.time.value=10*e,this.rays.material.uniforms.time.value=e}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=(i(l),"\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n"),u="\n    \n    // Awesome Shader from Nicolas barradeau (chladni patterns)\n    // http://thebookofshaders.com/edit.php?log=160601182629 \n\n    precision mediump float;\n   \n    #define PI 3.1415926535897932384626433832795\n    #define GR 1. / 1.61803399\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main() {\n        \n        vec2 st = vUv * 2.0;\n\n        float iteration = 20. + smoothstep( -1., 1., sin( PI * 2. * ( time * 0.1 ) ) ) * 20.;\n        st.y -= GR;\n        \n        vec2 t = vec2( abs(sin( PI * time *0.1 ) ) );\n        \n        float sqi = sqrt( iteration );\n        \n        float a = sqi * sin( time * 0.01 );\n        float b = sqi * cos( time * 0.005 );\n        \n        mat2 m = mat2(  cos( a * PI * st.x ), \n                        cos( (b+a) * PI * st.y ), \n                       -cos( b * PI * st.x ), \n                        cos( a * PI * st.y ) );\n        \n        st = t * m;\n        float len = length( st );\n        \n        vec3 color = mix( vec3(0.92,0.83,0.60), vec3(1.,0.94,0.69), smoothstep( 1.0, 1.01, len ) );\n        color += .1 * vec3(0.95,0.86,0.69) * smoothstep( 0.5,.51, len );\n        \n        gl_FragColor = vec4(color,1.0);\n        \n    }\n\n",c=function(){function e(t,n){r(this,e),this.lifetime=1,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0}},vertexShader:d,fragmentShader:u,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=10*t,
this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=r(s),d=n(3),u=r(d),c=n(4),h=r(c),f=n(2),m=r(f),p=n(34),v=r(p),g=n(36),w=r(g);n(11),n(12),n(13),n(14),n(5),n(6),n(7),n(8),n(9),n(10);var b=n(15),_=i(b),y={x:128,y:128},x=[{radius:7,distance:22,speed:9.6},{radius:9,distance:42,speed:8.3},{radius:6,distance:60,speed:11},{radius:13,distance:82,speed:12},{radius:8,distance:106,speed:5},{radius:10,distance:130,speed:5.5},{radius:9,distance:155,speed:6.7},{radius:7,distance:178,speed:4.2},{radius:8,distance:200,speed:3}],S=function(){function e(){a(this,e),this.options={blending:.82,blurX:.15,blurY:.15,speed:1.2,animate:!0},this.rttParams={minFilter:l["default"].LinearFilter,magFilter:l["default"].LinearFilter,format:l["default"].RGBAFormat,stencilBuffer:!0},this.clock=new l["default"].Clock,this.stats=new u["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new l["default"].Scene,this.camera=new l["default"].PerspectiveCamera(90,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=40,this.camera.position.y=50,this.camera.lookAt(new l["default"].Vector3(0,0,0)),this.renderer=new l["default"].WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),this.rtt=new v["default"](y.x,y.y),this.rtt.render(this.renderer,0);var t=new l["default"].AmbientLight(3355443);this.scene.add(t),this.sun=new w["default"](this.scene),this.meshes=[];for(var n=0,i=x.length;n<i;n++)this.meshes.push(this.newMesh((0,m["default"])(),x[n].radius)),this.scene.add(this.meshes[n]);this.effectSave=new l["default"].SavePass(new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.effectBlend=new l["default"].ShaderPass(l["default"].BlendShader,"tDiffuse1"),this.effectBlend.uniforms.tDiffuse2.value=this.effectSave.renderTarget.texture,this.effectBlend.uniforms.mixRatio.value=this.options.blending,this.effectCopyFront=new l["default"].ShaderPass(l["default"].CopyShader),this.effectCopy=new l["default"].ShaderPass(l["default"].CopyShader),this.effectCopy.renderToScreen=!0,this.effectHBlur=new l["default"].ShaderPass(l["default"].HorizontalBlurShader),this.effectVBlur=new l["default"].ShaderPass(l["default"].VerticalBlurShader),this.effectHBlur.uniforms.h.value=2/(window.innerWidth/2)*this.options.blurX,this.effectVBlur.uniforms.v.value=2/(window.innerHeight/2)*this.options.blurY,this.clearMask=new l["default"].ClearMaskPass,this.renderMask=new l["default"].MaskPass(this.scene,this.camera),this.renderMaskInverse=new l["default"].MaskPass(this.scene,this.camera),this.renderMaskInverse.inverse=!0,this.renderPass=new l["default"].RenderPass(this.scene,this.camera),this.renderPass.clear=!0,this.renderPass.alpha=!0,this.renderPass.transparent=!0,this.renderPass.premultipliedAlpha=!0,this.composer=new l["default"].EffectComposer(this.renderer,new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.composer.autoClear=!0,this.rttPass=new l["default"].TexturePass(this.composer.renderTarget2.texture),this.rttPass.uniforms.tDiffuse.value.format=l["default"].RGBAFormat,this.rttPass.material.transparent=!0,this.composer.addPass(new l["default"].RenderPass(this.scene,this.camera)),this.composer.addPass(this.renderPass),this.composer.addPass(this.renderMaskInverse),this.composer.addPass(this.effectHBlur),this.composer.addPass(this.effectVBlur),this.composer.addPass(this.clearMask),this.composer.addPass(this.effectBlend),this.composer.addPass(this.effectSave),this.composer.addPass(this.effectCopy),this.controls=new((0,h["default"])(l["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,this.gui=new _.dat.GUI,this.gui.add(this.options,"blending",0,.99,.8).onChange(function(){this.effectBlend.uniforms.mixRatio.value=this.options.blending}.bind(this)),this.gui.add(this.options,"blurX",0,1,1).onChange(function(){this.effectHBlur.uniforms.h.value=2/(window.innerWidth/2)*this.options.blurX}.bind(this)),this.gui.add(this.options,"blurY",0,1,1).onChange(function(){this.effectVBlur.uniforms.v.value=2/(window.innerHeight/2)*this.options.blurY}.bind(this)),this.gui.add(this.options,"speed",0,2,this.options.speed),this.gui.add(this.options,"animate",!1,!0,this.options.animate),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return o(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.rttPass.uniforms.tDiffuse.value=this.composer.renderTarget2.texture,this.rttPass.uniforms.tDiffuse.value=this.composer.renderTarget2.texture}},{key:"newMesh",value:function(e,t){var n=new l["default"].IcosahedronGeometry(t,1),i=new l["default"].MeshPhongMaterial({color:e,map:this.rtt.texture.texture,shininess:9,specular:3355443,shading:l["default"].SmoothShading}),r=new l["default"].Mesh(n,i);return r.castShadow=!1,r.receiveShadow=!1,r}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta(),t=5e-4*Date.now();if(this.options.animate)for(var n=0,i=this.meshes.length;n<i;n++){var r=this.meshes[n];r.position.x=Math.sin(t*x[n].speed*this.options.speed)*x[n].distance,r.position.z=Math.cos(t*x[n].speed*this.options.speed)*x[n].distance}this.sun.rays.lookAt(this.camera.position),this.sun.update(this.clock.elapsedTime),this.rtt.render(this.renderer,e),this.composer.render(e)}}]),e}();t["default"]=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l="\n\n   precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",d="\n\n    precision mediump float;\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main( void ) {\n        vec3 color = vec3(1.0, 1.0, 0.8);\n        float alpha = 0.0;\n        alpha += ( 1.0 - distance(vUv, vec2(.5,.5) ) * 2.0 + sin(time*10.0)*.02 ) * .2;\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 6.0 + sin(    time*30.0)*.1 ) * .1, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(3.14 +time*3.0)*.2 ) * .3, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(      time*12.0)*.01 ) * .6, 0.0, 1.0);\n        alpha *= .7;\n        alpha = clamp(alpha, 0.0, 1.0);\n        gl_FragColor = vec4( color.rgb, alpha );\n    }\n",u="\n    \n    precision mediump float;\n\n    uniform float time;\n    \n    varying vec2 vUv;\n\n    void main () {\n        vec3 color = vec3(1.0, 1.0, .8);\n        gl_FragColor = vec4( vec3(.7, .5, .2) + color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n        // gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n    }\n",c=function(){function e(t){r(this,e),this.radius=9,this.raydius=72,this.light=new s["default"].PointLight(16777113,2,5e4),this.lightMesh=new s["default"].Mesh(new s["default"].IcosahedronGeometry(this.radius,1),new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:u,transparent:!0,blending:"AdditiveBlending",shading:s["default"].SmoothShading})),this.light.add(this.lightMesh),this.light.castShadow=!0,t.add(this.light);var n=new s["default"].PlaneBufferGeometry(this.raydius,this.raydius),i=new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:d,transparent:!0,blending:"AdditiveBlending",alphaTest:.1,shading:s["default"].SmoothShading});this.rays=new s["default"].Mesh(n,i)}return a(e,[{key:"update",value:function(e){this.lightMesh.material.uniforms.time.value=10*e,this.rays.material.uniforms.time.value=e,this.lightMesh.rotation.y=-e}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=(i(l),"\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n"),u="\n    \n    // Awesome Shader from Nicolas barradeau (chladni patterns)\n    // http://thebookofshaders.com/edit.php?log=160601182629 \n\n    precision mediump float;\n   \n    #define PI 3.1415926535897932384626433832795\n    #define GR 1. / 1.61803399\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main() {\n        \n        vec2 st = vUv * 2.0;\n\n        float iteration = 20. + smoothstep( -1., 1., sin( PI * 2. * ( time * 0.1 ) ) ) * 20.;\n        st.y -= GR;\n        \n        vec2 t = vec2( abs(sin( PI * time *0.1 ) ) );\n        \n        float sqi = sqrt( iteration );\n        \n        float a = sqi * sin( time * 0.01 );\n        float b = sqi * cos( time * 0.005 );\n        \n        mat2 m = mat2(  cos( a * PI * st.x ), \n                        cos( (b+a) * PI * st.y ), \n                       -cos( b * PI * st.x ), \n                        cos( a * PI * st.y ) );\n        \n        st = t * m;\n        float len = length( st );\n        \n        vec3 color = mix( vec3(0.92,0.83,0.60), vec3(1.,0.94,0.69), smoothstep( 1.0, 1.01, len ) );\n        color += .1 * vec3(0.95,0.86,0.69) * smoothstep( 0.5,.51, len );\n        \n        gl_FragColor = vec4(color,1.0);\n        \n    }\n\n",c=function(){function e(t,n){r(this,e),this.lifetime=1,this.camera=new s["default"].OrthographicCamera(t/-2,t/2,n/2,n/-2,(-1e4),1e4),this.scene=new s["default"].Scene,this.texture=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat});var i=new s["default"].PlaneBufferGeometry(t,n),a=new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:0}},vertexShader:d,fragmentShader:u,blending:s["default"].AdditiveBlending,transparent:!0});this.quad=new s["default"].Mesh(i,a),this.scene.add(this.quad)}return a(e,[{key:"render",value:function(e,t){this.lifetime+=10*t,this.quad.material.uniforms.time.value=this.lifetime,e.render(this.scene,this.camera,this.texture,!0)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=r(s),d=n(3),u=r(d),c=n(4),h=r(c),f=n(2),m=r(f),p=n(37),v=r(p),g=n(39),w=r(g);n(11),n(12),n(13),n(14),n(5),n(6),n(7),n(8),n(9),n(10);var b=n(15);i(b);n(17);var _={x:128,y:128},y=[{radius:7,distance:22,speed:9.6},{radius:9,distance:42,speed:8.3},{radius:6,distance:60,speed:11},{radius:13,distance:82,speed:12},{radius:8,distance:106,speed:5},{radius:10,distance:130,speed:5.5},{radius:9,distance:155,speed:6.7},{radius:7,distance:178,speed:4.2},{radius:8,distance:200,speed:3}],x=function(){function e(){a(this,e),this.options={blending:.82,blurX:.15,blurY:.15,speed:.6,animate:!0,shadows:!1},this.particleSunOptions={position:new l["default"].Vector3,positionRandomness:17,velocity:new l["default"].Vector3,velocityRandomness:.5,color:16772744,colorRandomness:.4,turbulence:0,lifetime:1,size:22,sizeRandomness:1},this.particlePlanetOptions={position:new l["default"].Vector3,positionRandomness:7,velocity:new l["default"].Vector3,velocityRandomness:.5,color:6710886,colorRandomness:.4,turbulence:0,lifetime:1,size:12,sizeRandomness:1},this.particleStarsOptions={position:new l["default"].Vector3,positionRandomness:4e3,velocity:new l["default"].Vector3,velocityRandomness:.5,color:11176191,colorRandomness:.4,turbulence:.2,lifetime:12,size:12,sizeRandomness:1},console.log("Particles planets:",this.particlePlanetOptions),console.log("Particles stars:",this.particleStarsOptions),this.rttParams={minFilter:l["default"].LinearFilter,magFilter:l["default"].LinearFilter,format:l["default"].RGBAFormat,stencilBuffer:!0},this.clock=new l["default"].Clock,this.stats=new u["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new l["default"].Scene,this.camera=new l["default"].PerspectiveCamera(90,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=40,this.camera.position.y=50,this.camera.lookAt(new l["default"].Vector3(0,0,0)),this.renderer=new l["default"].WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.shadowMap.enabled=this.options.shadows,this.renderer.shadowMap.type=l["default"].PCFSoftShadowMap,this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),this.rtt=new v["default"](_.x,_.y),this.rtt.render(this.renderer,0);var t=new l["default"].AmbientLight(3355443);this.scene.add(t),this.sun=new w["default"](this.scene),this.meshes=[];for(var n=0,i=y.length;n<i;n++)this.meshes.push(this.newMesh((0,m["default"])(),y[n].radius)),this.scene.add(this.meshes[n]);this.particleSystem=new l["default"].GPUParticleSystem({maxParticles:25e4}),this.scene.add(this.particleSystem),this.effectSave=new l["default"].SavePass(new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.effectBlend=new l["default"].ShaderPass(l["default"].BlendShader,"tDiffuse1"),this.effectBlend.uniforms.tDiffuse2.value=this.effectSave.renderTarget.texture,this.effectBlend.uniforms.mixRatio.value=this.options.blending,this.effectCopy=new l["default"].ShaderPass(l["default"].CopyShader),this.effectCopy.renderToScreen=!0,this.effectHBlur=new l["default"].ShaderPass(l["default"].HorizontalBlurShader),this.effectVBlur=new l["default"].ShaderPass(l["default"].VerticalBlurShader),this.effectHBlur.uniforms.h.value=2/(window.innerWidth/2)*this.options.blurX,this.effectVBlur.uniforms.v.value=2/(window.innerHeight/2)*this.options.blurY,this.clearMask=new l["default"].ClearMaskPass,this.renderMask=new l["default"].MaskPass(this.scene,this.camera),this.renderMaskInverse=new l["default"].MaskPass(this.scene,this.camera),this.renderMaskInverse.inverse=!0,this.renderPass=new l["default"].RenderPass(this.scene,this.camera),this.renderPass.clear=!0,this.renderPass.alpha=!0,this.renderPass.transparent=!0,this.renderPass.premultipliedAlpha=!0,this.composer=new l["default"].EffectComposer(this.renderer,new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.composer.autoClear=!0,this.rttPass=new l["default"].TexturePass(this.composer.renderTarget2.texture),this.rttPass.uniforms.tDiffuse.value.format=l["default"].RGBAFormat,this.rttPass.material.transparent=!0,this.composer.addPass(new l["default"].RenderPass(this.scene,this.camera)),this.composer.addPass(this.renderPass),this.composer.addPass(this.renderMaskInverse),this.composer.addPass(this.effectHBlur),this.composer.addPass(this.effectVBlur),this.composer.addPass(this.clearMask),this.composer.addPass(this.effectBlend),this.composer.addPass(this.effectSave),this.composer.addPass(this.effectCopy),this.controls=new((0,h["default"])(l["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return o(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.rttPass.uniforms.tDiffuse.value=this.composer.renderTarget2.texture,this.rttPass.uniforms.tDiffuse.value=this.composer.renderTarget2.texture}},{key:"newMesh",value:function(e,t){var n=new l["default"].SphereGeometry(t,12,12),i=new l["default"].MeshPhongMaterial({color:e,map:this.rtt.texture.texture,shininess:9,specular:3355443,shading:l["default"].SmoothShading,blending:l["default"].AdditiveBlending}),r=new l["default"].Mesh(n,i);return r.castShadow=!0,r.receiveShadow=!0,console.log("color:",i.color,e),r}},{key:"componentToHex",value:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta(),t=5e-4*Date.now();if(this.particleSystem.update(this.clock.elapsedTime),this.options.animate)for(var n=0,i=this.meshes.length;n<i;n++){var r=this.meshes[n];r.position.x=Math.sin(t*y[n].speed*this.options.speed)*y[n].distance,r.position.z=Math.cos(t*y[n].speed*this.options.speed)*y[n].distance;for(var a=0;a<2;a++)this.particlePlanetOptions.position.x=r.position.x,this.particlePlanetOptions.position.y=r.position.y,this.particlePlanetOptions.position.z=r.position.z,this.particleSystem.spawnParticle(this.particlePlanetOptions)}for(var a=0;a<2;a++)this.particleSystem.spawnParticle(this.particleStarsOptions);for(var a=0;a<12;a++)this.particleSystem.spawnParticle(this.particleSunOptions);this.sun.rays.lookAt(this.camera.position),this.sun.update(this.clock.elapsedTime),this.rtt.render(this.renderer,e),this.composer.render(e)}}]),e}();t["default"]=x},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l="\n\n   precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",d="\n\n    precision mediump float;\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main( void ) {\n        vec3 color = vec3(1.0, 1.0, 0.8);\n        float alpha = 0.0;\n        alpha += ( 1.0 - distance(vUv, vec2(.5,.5) ) * 2.0 + sin(time*10.0)*.02 ) * .2;\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 6.0 + sin(    time*30.0)*.1 ) * .1, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(3.14 +time*3.0)*.2 ) * .3, 0.0, 1.0);\n        alpha += clamp( ( 1.0 - distance(vUv, vec2(.5,.5) ) * 7.0 + sin(      time*12.0)*.01 ) * .6, 0.0, 1.0);\n        alpha *= .7;\n        alpha = clamp(alpha, 0.0, 1.0);\n        gl_FragColor = vec4( color.rgb, alpha );\n    }\n",u="\n    \n    precision mediump float;\n\n    uniform float time;\n    \n    varying vec2 vUv;\n\n    void main () {\n        vec3 color = vec3(1.0, 1.0, .8);\n        gl_FragColor = vec4( vec3(.7, .5, .2) + color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n        // gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time)), 1.0);\n    }\n",c=function(){function e(t){r(this,e),this.radius=9,this.raydius=72,this.light=new s["default"].PointLight(16777113,2,5e4),this.lightMesh=new s["default"].Mesh(new s["default"].SphereGeometry(this.radius,16,16),new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:u,transparent:!0,blending:"AdditiveBlending",shading:s["default"].SmoothShading})),this.light.add(this.lightMesh),this.light.castShadow=!0,t.add(this.light);var n=new s["default"].PlaneBufferGeometry(this.raydius,this.raydius),i=new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:d,transparent:!0,blending:"AdditiveBlending",alphaTest:.1,shading:s["default"].SmoothShading});this.rays=new s["default"].Mesh(n,i)}return a(e,[{key:"update",value:function(e){this.lightMesh.material.uniforms.time.value=10*e,this.rays.material.uniforms.time.value=e,this.lightMesh.rotation.y=-e}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=i(l),u="\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n       \n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",c="\n    \n    precision mediump float;\n\n    uniform float time;\n\n    uniform vec3 color;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time*4.0)), 1.0);\n    }\n\n",h=function(){function e(t,n){r(this,e),this.euler=new s["default"].Euler(1,1,1,"XYZ"),this.velocity=new s["default"].Vector3(0,0,0),this.mesh=new s["default"].Mesh(new s["default"].SphereGeometry(n,16,16),new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:1},color:{type:"c",value:new s["default"].Color((0,d["default"])())}},vertexShader:u,fragmentShader:c,side:s["default"].FrontSide,blending:s["default"].AdditiveBlending,shading:s["default"].SmoothShading})),this.mesh.geometry.computeVertexNormals(),t.add(this.mesh)}return a(e,[{key:"update",value:function(e,t){this.mesh.material.uniforms.time.value=1*e}}]),e}();t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(18),d=i(l),u="\n\n    #define delta ( 1.0 / 60.0 )\n\n    uniform sampler2D texturePosition;\n\n    void main() {\n\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n        vec4 pos = texture2D( texturePosition, uv );\n        \n        // pos = -50.0 + mod( pos+ delta*10.0, 100.0);\n\n        gl_FragColor = vec4( pos.xyz, 1.0 );\n\n    }\n",c="\n\n    // For PI declaration:\n    #include <common>\n\n    uniform sampler2D texturePosition;\n\n    uniform float cameraConstant;\n\n    varying vec3 vColor;\n\n    void main() {\n\n\n        vec4 posTemp = texture2D( texturePosition, uv );\n        vec3 pos = posTemp.xyz;\n\n        // vColor = posTemp.xyz;\n        // vColor = vec3( abs(sin(posTemp.x*100.0)),  abs(sin(posTemp.y*120.0)),  abs(sin(posTemp.z*70.0)));\n        // vColor = posTemp.aaa * 255.0;\n        vColor = vec3( 1.0 );\n\n        vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n        gl_PointSize = .1 * cameraConstant / ( - mvPosition.z );\n        \n        if ( gl_PointSize < 4.0 ) gl_PointSize = 4.0;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n    }\n",h="\n\n    #include <common>\n    \n    varying vec3 vColor;\n\n    void main() {\n\n        gl_FragColor = vec4( vColor.rgb, 1. - sin( distance(vec2(.5,.5), gl_PointCoord.xy)*PI ) );\n     \n    }\n",f=64,m=f*f,p=function(){function e(t,n,i){r(this,e),this.scene=t,this.renderer=n,this.camera=i,this.gpuCompute,this.positionVariable,this.positionUniforms,this.particleUniforms,this.options={radius:100},this.initComputeRenderer(n),this.initParticles(),this.restartSimulation()}return a(e,[{key:"initComputeRenderer",value:function(e){this.gpuCompute=new d["default"](f,f,e);var t=this.gpuCompute.createTexture();this.fillTextures(t),this.positionVariable=this.gpuCompute.addVariable("texturePosition",u,this.dtPosition),this.positionUniforms=this.positionVariable.material.uniforms;var n=this.gpuCompute.init();null!==n&&console.error(n)}},{key:"restartSimulation",value:function(){var e=this.gpuCompute.createTexture(),t=this.gpuCompute.createTexture();this.fillTextures(e,t),this.gpuCompute.renderTexture(e,this.positionVariable.renderTargets[0]),this.gpuCompute.renderTexture(e,this.positionVariable.renderTargets[1])}},{key:"initParticles",value:function(){for(var e=new s["default"].BufferGeometry,t=new Float32Array(3*m),n=0,i=0;i<m;i++)t[n++]=0,t[n++]=0,t[n++]=0;var r=new Float32Array(2*m);n=0;for(var a=0;a<f;a++)for(var o=0;o<f;o++)r[n++]=o/(f-1),r[n++]=a/(f-1);e.addAttribute("position",new s["default"].BufferAttribute(t,3)),e.addAttribute("uv",new s["default"].BufferAttribute(r,2)),this.particleUniforms={texturePosition:{value:null},cameraConstant:{value:this.getCameraConstant(this.camera)}};var l=new s["default"].ShaderMaterial({uniforms:this.particleUniforms,vertexShader:c,fragmentShader:h,transparent:!0});l.extensions.drawBuffers=!0;var d=new s["default"].Points(e,l);d.matrixAutoUpdate=!1,d.updateMatrix(),this.scene.add(d)}},{key:"fillTextures",value:function(e){for(var t=e.image.data,n=this.options.radius,i=0,r=t.length;i<r;i+=4){var a=(2*Math.random()-1)*n,o=(2*Math.random()-1)*n,s=(2*Math.random()-1)*n;t[i+0]=a,t[i+1]=o,t[i+2]=s,t[i+3]=0}}},{key:"handleResize",value:function(){this.particleUniforms.cameraConstant.value=this.getCameraConstant()}},{key:"getCameraConstant",value:function(){return window.innerHeight/(Math.tan(.5*s["default"].Math.DEG2RAD*this.camera.fov)/this.camera.zoom)}},{key:"update",value:function(e){this.gpuCompute.compute(),this.particleUniforms.texturePosition.value=this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture}}]),e}();t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l="\n\n   precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",d="\n   \n    precision mediump float;\n   \n    #define PI 3.1415926535\n    #define PI2 6.283185307\n    #define GR 1. / 1.61803399\n\n\n    #define TAU 6.28318530718\n    #define MAX_ITER 3\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main() {\n\n        vec2 uv = ((vUv * 2.0) - 1.0) * vec2(1.0, 1.0);\n\n        //vec2 p = mod(uv*TAU*2.0, TAU)-250.0;//tilling\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 3.0;\n        float inten = .005;\n        for (int n = 0; n < MAX_ITER; n++) \n        {\n            float t = time * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, 1.4);\n        vec3 color = vec3(pow(abs(c), 1.0));\n        // color = clamp(color, 0.0, 1.0);\n        color = clamp(color * vec3(0.15, 0.05, 0.2), 0.0, 1.0);\n        // color = clamp(color + vec3(0.15, 0.05, 0.2), 0.0, 1.0);\n       \n        float a =  (abs( sin(vUv.y*PI) ) );\n        gl_FragColor = vec4(color * a, a);\n       \n    }\n",u=function(){function e(t){r(this,e),this.radius=2200,this.mesh=new s["default"].Mesh(new s["default"].SphereGeometry(this.radius,16,16),new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:d,side:s["default"].BackSide,blending:s["default"].AdditiveBlending,shading:s["default"].SmoothShading})),t.add(this.mesh)}return a(e,[{key:"update",value:function(e){this.mesh.material.uniforms.time.value=.5*e,this.mesh.rotation.x=.05*-e}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=r(s),d=n(3),u=r(d),c=n(4),h=r(c),f=n(2),m=(r(f),n(40)),p=r(m),v=n(42),g=r(v),w=n(41),b=r(w);n(11),n(12),n(13),n(14),n(16),n(5),n(6),n(7),n(8),n(9),n(10);var _=n(15);i(_);n(17);var y=function(){function e(){a(this,e),this.options={blending:.82,blurX:.15,blurY:.15,speed:.6},this.clock=new l["default"].Clock,this.stats=new u["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new l["default"].Scene,this.scene.fog=new l["default"].Fog(0,0,160),this.camera=new l["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e5),this.camera.position.z=10,this.camera.position.y=2,this.camera.lookAt(new l["default"].Vector3(0,0,0)),this.renderer=new l["default"].WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio||1),
this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement);var t=new l["default"].AmbientLight(8947848);this.scene.add(t),this.horizon=new g["default"](this.scene),this.boid=new p["default"](this.scene,1.3),this.particles=new b["default"](this.scene,this.renderer,this.camera),this.controls=new((0,h["default"])(l["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,this.controls.minDistance=10,this.controls.maxDistance=160,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return o(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta();this.boid.mesh.position.x=3*Math.sin(1.3*this.clock.elapsedTime),this.boid.mesh.position.y=3*Math.sin(1.2*this.clock.elapsedTime),this.boid.mesh.position.z=3*Math.sin(1.4*this.clock.elapsedTime),this.boid.update(this.clock.elapsedTime),this.horizon.update(this.clock.elapsedTime),this.particles.update(e),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(2),d=i(l),u="\n    \n    precision mediump float;\n\n    varying vec2 vUv;\n       \n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",c="\n    \n    precision mediump float;\n\n    uniform float time;\n\n    uniform vec3 color;\n    \n    varying vec2 vUv;\n\n    void main () {\n        gl_FragColor = vec4( color.rgb * abs(sin(vUv.x * 100.0)) * abs(sin(vUv.y * 100.0 + time*4.0)), 1.0);\n    }\n\n",h=function(){function e(t,n){r(this,e),this.euler=new s["default"].Euler(1,1,1,"XYZ"),this.velocity=new s["default"].Vector3(0,0,0),this.mesh=new s["default"].Mesh(new s["default"].SphereGeometry(n,16,16),new s["default"].ShaderMaterial({uniforms:{time:{type:"f",value:1},color:{type:"c",value:new s["default"].Color((0,d["default"])())}},vertexShader:u,fragmentShader:c,side:s["default"].FrontSide,blending:s["default"].AdditiveBlending,shading:s["default"].SmoothShading})),this.mesh.geometry.computeVertexNormals(),t.add(this.mesh)}return a(e,[{key:"update",value:function(e,t){this.mesh.material.uniforms.time.value=1*e}}]),e}();t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),function s(){return r(this,s),{uniforms:{tDiffuse:{value:null},brightness:{type:"f",value:1}},vertexShader:"\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n                }\n            ",fragmentShader:"\n\n                uniform sampler2D tDiffuse;\n                uniform float brightness;\n                varying vec2 vUv;\n                void main() {\n                    vec4 color = texture2D( tDiffuse, vUv );\n                    gl_FragColor = color.rgba * brightness;\n                }\n            "}});t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(18),d=i(l),u="\n\n    uniform float delta;\n\n    uniform sampler2D texturePosition;\n\n    void main() {\n\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n        vec4 pos = texture2D( texturePosition, uv );\n        \n        pos.z = -150.0 + mod( pos.z+ delta*130.0, 150.0);\n\n        gl_FragColor = vec4( pos.xyz, 1.0 );\n\n    }\n",c="\n\n    // For PI declaration:\n    #include <common>\n\n    uniform sampler2D texturePosition;\n\n    uniform float cameraConstant;\n\n    varying vec3 vColor;\n\n    void main() {\n\n\n        vec4 posTemp = texture2D( texturePosition, uv );\n        vec3 pos = posTemp.xyz;\n\n        // vColor = posTemp.xyz;\n        // vColor = vec3( abs(sin(posTemp.x*100.0)),  abs(sin(posTemp.y*120.0)),  abs(sin(posTemp.z*70.0)));\n        // vColor = posTemp.aaa * 255.0;\n        vColor = vec3( 1.0 );\n\n        vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n        gl_PointSize = .1 * cameraConstant / ( - mvPosition.z );\n        \n        if ( gl_PointSize < 4.0 ) gl_PointSize = 4.0;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n    }\n",h="\n\n    #include <common>\n    \n    varying vec3 vColor;\n\n    void main() {\n\n        gl_FragColor = vec4( vColor.rgb, 1.0-sin( distance(vec2(.5,.5), gl_PointCoord.xy)*PI ) );\n    }\n",f=64,m=f*f,p=function(){function e(t,n,i){r(this,e),this.scene=t,this.renderer=n,this.camera=i,this.gpuCompute,this.positionVariable,this.positionUniforms,this.particleUniforms,this.options={radius:100},this.initComputeRenderer(n),this.initParticles(),this.restartSimulation()}return a(e,[{key:"initComputeRenderer",value:function(e){this.gpuCompute=new d["default"](f,f,e);var t=this.gpuCompute.createTexture();this.fillTextures(t),this.positionVariable=this.gpuCompute.addVariable("texturePosition",u,this.dtPosition),this.positionUniforms=this.positionVariable.material.uniforms,this.positionUniforms.delta={type:"f",value:0};var n=this.gpuCompute.init();null!==n&&console.error(n)}},{key:"restartSimulation",value:function(){var e=this.gpuCompute.createTexture(),t=this.gpuCompute.createTexture();this.fillTextures(e,t),this.gpuCompute.renderTexture(e,this.positionVariable.renderTargets[0]),this.gpuCompute.renderTexture(e,this.positionVariable.renderTargets[1])}},{key:"initParticles",value:function(){for(var e=new s["default"].BufferGeometry,t=new Float32Array(3*m),n=0,i=0;i<m;i++)t[n++]=0,t[n++]=0,t[n++]=0;var r=new Float32Array(2*m);n=0;for(var a=0;a<f;a++)for(var o=0;o<f;o++)r[n++]=o/(f-1),r[n++]=a/(f-1);e.addAttribute("position",new s["default"].BufferAttribute(t,3)),e.addAttribute("uv",new s["default"].BufferAttribute(r,2)),this.particleUniforms={texturePosition:{value:null},cameraConstant:{value:this.getCameraConstant(this.camera)}};var l=new s["default"].ShaderMaterial({uniforms:this.particleUniforms,vertexShader:c,fragmentShader:h,transparent:!0});l.extensions.drawBuffers=!0;var d=new s["default"].Points(e,l);d.matrixAutoUpdate=!1,d.updateMatrix(),this.scene.add(d)}},{key:"fillTextures",value:function(e){for(var t=e.image.data,n=this.options.radius,i=0,r=t.length;i<r;i+=4){var a=(2*Math.random()-1)*n,o=(2*Math.random()-1)*n,s=(2*Math.random()-1)*n*5;t[i+0]=a,t[i+1]=o,t[i+2]=s,t[i+3]=0}}},{key:"handleResize",value:function(){this.particleUniforms.cameraConstant.value=this.getCameraConstant()}},{key:"getCameraConstant",value:function(){return window.innerHeight/(Math.tan(.5*s["default"].Math.DEG2RAD*this.camera.fov)/this.camera.zoom)}},{key:"update",value:function(e){this.gpuCompute.compute(),this.positionUniforms.delta.value=e,this.particleUniforms.texturePosition.value=this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture}}]),e}();t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l="\n\n   precision mediump float;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n    \n",d="\n   \n    precision mediump float;\n   \n    #define PI 3.1415926535\n    #define PI2 6.283185307\n    #define GR 1. / 1.61803399\n\n\n    #define TAU 6.28318530718\n    #define MAX_ITER 3\n\n    varying vec2 vUv;\n\n    uniform float time;\n\n    void main() {\n\n        vec2 uv = ((vUv * 2.0) - 1.0) * vec2(1.0, 1.0);\n\n        //vec2 p = mod(uv*TAU*2.0, TAU)-250.0;//tilling\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 3.0;\n        float inten = .005;\n        for (int n = 0; n < MAX_ITER; n++) \n        {\n            float t = time * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, 1.4);\n        vec3 color = vec3(pow(abs(c), 1.0));\n        // color = clamp(color, 0.0, 1.0);\n        color = clamp(color * vec3(0.15, 0.05, 0.2), 0.0, 1.0);\n        // color = clamp(color + vec3(0.15, 0.05, 0.2), 0.0, 1.0);\n       \n        float a =  (abs( sin(vUv.y*PI) ) );\n        gl_FragColor = vec4(color * a, a);\n       \n    }\n",u=function(){function e(t){r(this,e),this.radius=2200,this.mesh=new s["default"].Mesh(new s["default"].SphereGeometry(this.radius,16,16),new s["default"].ShaderMaterial({uniforms:{time:{value:1}},vertexShader:l,fragmentShader:d,side:s["default"].BackSide,blending:s["default"].AdditiveBlending,shading:s["default"].SmoothShading})),this.mesh.rotation.y=Math.PI/2,t.add(this.mesh)}return a(e,[{key:"update",value:function(e){this.mesh.material.uniforms.time.value=.5*e,this.mesh.rotation.x=.05*-e}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=r(s),d=n(3),u=r(d),c=n(4),h=r(c),f=n(2),m=(r(f),n(44)),p=(r(m),n(47)),v=r(p),g=n(46),w=r(g),b=n(45),_=r(b);n(11),n(12),n(13),n(14),n(16),n(5),n(6),n(7),n(8),n(9),n(10);var y=n(15),x=i(y);n(17);var S=function(){function e(){a(this,e),this.options={blending:.94,brightness:1,speed:.6},this.clock=new l["default"].Clock,this.stats=new u["default"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement),this.scene=new l["default"].Scene,this.scene.fog=new l["default"].Fog(0,0,160),this.camera=new l["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e5),this.camera.position.z=10,this.camera.position.y=2,this.camera.lookAt(new l["default"].Vector3(0,0,0)),this.renderer=new l["default"].WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),this.horizon=new v["default"](this.scene),this.particles=new w["default"](this.scene,this.renderer,this.camera),this.controls=new((0,h["default"])(l["default"]))(this.camera,this.renderer.domElement),this.controls.enableZoom=!0,this.controls.minDistance=10,this.controls.maxDistance=160,this.rttParams={minFilter:l["default"].LinearFilter,magFilter:l["default"].LinearFilter,format:l["default"].RGBAFormat,stencilBuffer:!0},this.effectSave=new l["default"].SavePass(new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.effectBlend=new l["default"].ShaderPass(l["default"].BlendShader,"tDiffuse1"),this.effectBlend.uniforms.tDiffuse2.value=this.effectSave.renderTarget.texture,this.effectBlend.uniforms.mixRatio.value=this.options.blending,this.effectBrightness=new l["default"].ShaderPass(new _["default"]),this.effectBrightness.uniforms.brightness.value=this.options.brightness,this.effectBrightness.renderToScreen=!0,this.effectCopy=new l["default"].ShaderPass(l["default"].CopyShader),this.renderPass=new l["default"].RenderPass(this.scene,this.camera),this.composer=new l["default"].EffectComposer(this.renderer,new l["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,this.rttParams)),this.composer.addPass(this.renderPass),this.composer.addPass(this.effectBlend),this.composer.addPass(this.effectSave),this.composer.addPass(this.effectBrightness),this.gui=new x.dat.GUI,this.gui.add(this.options,"brightness",0,10).step(.1).onChange(function(){this.effectBrightness.uniforms.brightness.value=this.options.brightness}.bind(this)),this.gui.add(this.options,"blending",0,1).step(.01).onChange(function(){this.effectBlend.uniforms.mixRatio.value=this.options.blending}.bind(this)),this.gui.add(this.options,"speed",0,4).step(.1),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.animate()}return o(e,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.stats.update();var e=this.clock.getDelta();this.horizon.update(this.clock.elapsedTime),this.particles.update(e*this.options.speed),this.composer.render(e),this.renderer.render(this.scene,this.camera)}}]),e}();t["default"]=S}]);
//# sourceMappingURL=app.bundle.js.map